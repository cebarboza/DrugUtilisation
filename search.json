[{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/LICENSE.html","id":null,"dir":"","previous_headings":"","what":"Apache License","title":"Apache License","text":"Version 2.0, January 2004 <http://www.apache.org/licenses/>","code":""},{"path":[]},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/LICENSE.html","id":"id_1-definitions","dir":"","previous_headings":"Terms and Conditions for use, reproduction, and distribution","what":"1. Definitions","title":"Apache License","text":"“License” shall mean terms conditions use, reproduction, distribution defined Sections 1 9 document. “Licensor” shall mean copyright owner entity authorized copyright owner granting License. “Legal Entity” shall mean union acting entity entities control, controlled , common control entity. purposes definition, “control” means () power, direct indirect, cause direction management entity, whether contract otherwise, (ii) ownership fifty percent (50%) outstanding shares, (iii) beneficial ownership entity. “” (“”) shall mean individual Legal Entity exercising permissions granted License. “Source” form shall mean preferred form making modifications, including limited software source code, documentation source, configuration files. “Object” form shall mean form resulting mechanical transformation translation Source form, including limited compiled object code, generated documentation, conversions media types. “Work” shall mean work authorship, whether Source Object form, made available License, indicated copyright notice included attached work (example provided Appendix ). “Derivative Works” shall mean work, whether Source Object form, based (derived ) Work editorial revisions, annotations, elaborations, modifications represent, whole, original work authorship. purposes License, Derivative Works shall include works remain separable , merely link (bind name) interfaces , Work Derivative Works thereof. “Contribution” shall mean work authorship, including original version Work modifications additions Work Derivative Works thereof, intentionally submitted Licensor inclusion Work copyright owner individual Legal Entity authorized submit behalf copyright owner. purposes definition, “submitted” means form electronic, verbal, written communication sent Licensor representatives, including limited communication electronic mailing lists, source code control systems, issue tracking systems managed , behalf , Licensor purpose discussing improving Work, excluding communication conspicuously marked otherwise designated writing copyright owner “Contribution.” “Contributor” shall mean Licensor individual Legal Entity behalf Contribution received Licensor subsequently incorporated within Work.","code":""},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/LICENSE.html","id":"id_2-grant-of-copyright-license","dir":"","previous_headings":"Terms and Conditions for use, reproduction, and distribution","what":"2. Grant of Copyright License","title":"Apache License","text":"Subject terms conditions License, Contributor hereby grants perpetual, worldwide, non-exclusive, -charge, royalty-free, irrevocable copyright license reproduce, prepare Derivative Works , publicly display, publicly perform, sublicense, distribute Work Derivative Works Source Object form.","code":""},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/LICENSE.html","id":"id_3-grant-of-patent-license","dir":"","previous_headings":"Terms and Conditions for use, reproduction, and distribution","what":"3. Grant of Patent License","title":"Apache License","text":"Subject terms conditions License, Contributor hereby grants perpetual, worldwide, non-exclusive, -charge, royalty-free, irrevocable (except stated section) patent license make, made, use, offer sell, sell, import, otherwise transfer Work, license applies patent claims licensable Contributor necessarily infringed Contribution(s) alone combination Contribution(s) Work Contribution(s) submitted. institute patent litigation entity (including cross-claim counterclaim lawsuit) alleging Work Contribution incorporated within Work constitutes direct contributory patent infringement, patent licenses granted License Work shall terminate date litigation filed.","code":""},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/LICENSE.html","id":"id_4-redistribution","dir":"","previous_headings":"Terms and Conditions for use, reproduction, and distribution","what":"4. Redistribution","title":"Apache License","text":"may reproduce distribute copies Work Derivative Works thereof medium, without modifications, Source Object form, provided meet following conditions: () must give recipients Work Derivative Works copy License; (b) must cause modified files carry prominent notices stating changed files; (c) must retain, Source form Derivative Works distribute, copyright, patent, trademark, attribution notices Source form Work, excluding notices pertain part Derivative Works; (d) Work includes “NOTICE” text file part distribution, Derivative Works distribute must include readable copy attribution notices contained within NOTICE file, excluding notices pertain part Derivative Works, least one following places: within NOTICE text file distributed part Derivative Works; within Source form documentation, provided along Derivative Works; , within display generated Derivative Works, wherever third-party notices normally appear. contents NOTICE file informational purposes modify License. may add attribution notices within Derivative Works distribute, alongside addendum NOTICE text Work, provided additional attribution notices construed modifying License. may add copyright statement modifications may provide additional different license terms conditions use, reproduction, distribution modifications, Derivative Works whole, provided use, reproduction, distribution Work otherwise complies conditions stated License.","code":""},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/LICENSE.html","id":"id_5-submission-of-contributions","dir":"","previous_headings":"Terms and Conditions for use, reproduction, and distribution","what":"5. Submission of Contributions","title":"Apache License","text":"Unless explicitly state otherwise, Contribution intentionally submitted inclusion Work Licensor shall terms conditions License, without additional terms conditions. Notwithstanding , nothing herein shall supersede modify terms separate license agreement may executed Licensor regarding Contributions.","code":""},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/LICENSE.html","id":"id_6-trademarks","dir":"","previous_headings":"Terms and Conditions for use, reproduction, and distribution","what":"6. Trademarks","title":"Apache License","text":"License grant permission use trade names, trademarks, service marks, product names Licensor, except required reasonable customary use describing origin Work reproducing content NOTICE file.","code":""},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/LICENSE.html","id":"id_7-disclaimer-of-warranty","dir":"","previous_headings":"Terms and Conditions for use, reproduction, and distribution","what":"7. Disclaimer of Warranty","title":"Apache License","text":"Unless required applicable law agreed writing, Licensor provides Work (Contributor provides Contributions) “” BASIS, WITHOUT WARRANTIES CONDITIONS KIND, either express implied, including, without limitation, warranties conditions TITLE, NON-INFRINGEMENT, MERCHANTABILITY, FITNESS PARTICULAR PURPOSE. solely responsible determining appropriateness using redistributing Work assume risks associated exercise permissions License.","code":""},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/LICENSE.html","id":"id_8-limitation-of-liability","dir":"","previous_headings":"Terms and Conditions for use, reproduction, and distribution","what":"8. Limitation of Liability","title":"Apache License","text":"event legal theory, whether tort (including negligence), contract, otherwise, unless required applicable law (deliberate grossly negligent acts) agreed writing, shall Contributor liable damages, including direct, indirect, special, incidental, consequential damages character arising result License use inability use Work (including limited damages loss goodwill, work stoppage, computer failure malfunction, commercial damages losses), even Contributor advised possibility damages.","code":""},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/LICENSE.html","id":"id_9-accepting-warranty-or-additional-liability","dir":"","previous_headings":"Terms and Conditions for use, reproduction, and distribution","what":"9. Accepting Warranty or Additional Liability","title":"Apache License","text":"redistributing Work Derivative Works thereof, may choose offer, charge fee , acceptance support, warranty, indemnity, liability obligations /rights consistent License. However, accepting obligations, may act behalf sole responsibility, behalf Contributor, agree indemnify, defend, hold Contributor harmless liability incurred , claims asserted , Contributor reason accepting warranty additional liability. END TERMS CONDITIONS","code":""},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/LICENSE.html","id":"appendix-how-to-apply-the-apache-license-to-your-work","dir":"","previous_headings":"","what":"APPENDIX: How to apply the Apache License to your work","title":"Apache License","text":"apply Apache License work, attach following boilerplate notice, fields enclosed brackets [] replaced identifying information. (Don’t include brackets!) text enclosed appropriate comment syntax file format. also recommend file class name description purpose included “printed page” copyright notice easier identification within third-party archives.","code":"Copyright [yyyy] [name of copyright owner]  Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except in compliance with the License. You may obtain a copy of the License at    http://www.apache.org/licenses/LICENSE-2.0  Unless required by applicable law or agreed to in writing, software distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions and limitations under the License."},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/articles/Intro_create_cohort.html","id":"create-mock-data-first","dir":"Articles","previous_headings":"","what":"Create mock data first","title":"Use DrugUtilisation to create cohort","text":"","code":"library(DrugUtilisation) library(CodelistGenerator) library(CDMConnector) library(dplyr) con <- DBI::dbConnect(duckdb::duckdb(), \":memory:\") connectionDetails <- list(   con = con,   writeSchema = \"main\",   cdmPrefix = NULL,   writePrefix = NULL ) cdm <- mockDrugUtilisation(   connectionDetails = connectionDetails,   numberIndividual = 100 )"},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/articles/Intro_create_cohort.html","id":"get-concept-code-for-cohort-generation","dir":"Articles","previous_headings":"","what":"Get concept code for cohort generation","title":"Use DrugUtilisation to create cohort","text":"generate cohort, need concept list, can obtained different ways. Get json file. Use concept code directly. Get ingredient Get ATC code get json file, function readConceptList() codesFromConceptSet() can used. list can created manually target codes: certain ingredient interest, code can also obtained getDrugIngredientCodes() CodelistGenerator. ATC code can also obtained, using getATCCodes() CodelistGenerator.","code":"#get concept from json file using readConceptList from this package or CodelistGenerator conceptSet_json_1 <- readConceptList(here::here(\"inst/Concept\"), cdm) conceptSet_json_2 <- codesFromConceptSet(here::here(\"inst/Concept\"), cdm)  conceptSet_json_1 #> $asthma #> [1] 317009 conceptSet_json_2 #> $asthma #> [1] 317009 #get concept using code directly conceptSet_code <- list(asthma = 317009) conceptSet_code #> $asthma #> [1] 317009 #get concept by ingredient conceptSet_ingredient <- getDrugIngredientCodes(cdm, name = \"simvastatin\") conceptSet_ingredient #> $simvastatin #> [1] 1539403 1539462 1539463 #get concept from ATC codes conceptSet_ATC <- getATCCodes(cdm,                                level = \"ATC 1st\",                                name = \"ALIMENTARY TRACT AND METABOLISM\") conceptSet_ATC #> $alimentary_tract_and_metabolism #> [1] 35897399"},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/articles/Intro_create_cohort.html","id":"create-cohort","dir":"Articles","previous_headings":"","what":"Create cohort","title":"Use DrugUtilisation to create cohort","text":"Now conceptSet, can proceed generate cohort. two functions package generate cohort: generateConceptCohortSet: generate cohort certain list concepts, drug. function exported CDMConnector generateDrugUtilisationCohortSet: generate cohort drug use","code":""},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/articles/Intro_create_cohort.html","id":"generateconceptcohortset","dir":"Articles","previous_headings":"Create cohort","what":"generateConceptCohortSet()","title":"Use DrugUtilisation to create cohort","text":"First, let’s use generateConceptCohortSet get asthma cohort using conceptSet_code, also give output changed conceptSet_json_1 conceptSet_json_2, using concept code. count cohort can assessed using cohortCount() CDMConnector Cohort attrition can assessed using cohortAttrition() CDMConnector end parameter set cohort end date defined. Now changed event end date demonstrate difference previous observation period end date. See now cohort_end_date different: requiredObservation parameter numeric vector length 2, defines number days required observation time prior index post index event included cohort. Let’s check now see reducing required observation affect asthma_1 cohort.","code":"cdm1 <- generateConceptCohortSet(cdm,   conceptSet = conceptSet_code,   name = \"asthma_1\",   end = \"observation_period_end_date\",   requiredObservation = c(10, 10),   overwrite = TRUE ) cdm1$asthma_1 #> # Source:   table<main.asthma_1> [?? x 4] #> # Database: DuckDB v0.9.1 [unknown@Linux 6.2.0-1014-azure:R 4.3.1/:memory:] #>    cohort_definition_id subject_id cohort_start_date cohort_end_date #>                   <int>      <int> <date>            <date>          #>  1                    1          1 1996-12-22        2001-09-25      #>  2                    1         57 2021-02-19        2021-03-10      #>  3                    1         66 2017-11-24        2019-11-09      #>  4                    1         12 2019-03-06        2022-03-30      #>  5                    1         20 2001-09-16        2014-10-05      #>  6                    1         36 2013-05-27        2022-12-19      #>  7                    1         68 2021-08-21        2022-11-01      #>  8                    1          5 1978-07-01        1995-01-31      #>  9                    1         16 2019-04-02        2020-08-17      #> 10                    1         26 2018-06-25        2020-10-21      #> # ℹ more rows cohortCount(cdm1$asthma_1) #> # A tibble: 1 × 3 #>   cohort_definition_id number_records number_subjects #>                  <int>          <dbl>           <dbl> #> 1                    1             45              45 cohortAttrition(cdm1$asthma_1) #> # A tibble: 1 × 7 #>   cohort_definition_id number_records number_subjects reason_id reason           #>                  <int>          <dbl>           <dbl>     <dbl> <chr>            #> 1                    1             45              45         1 Qualifying init… #> # ℹ 2 more variables: excluded_records <dbl>, excluded_subjects <dbl> cdm1 <- generateConceptCohortSet(cdm,   conceptSet = conceptSet_code,   name = \"asthma_2\",   end = \"event_end_date\",   requiredObservation = c(10, 10),   overwrite = TRUE ) cdm1$asthma_2 #> # Source:   table<main.asthma_2> [?? x 4] #> # Database: DuckDB v0.9.1 [unknown@Linux 6.2.0-1014-azure:R 4.3.1/:memory:] #>    cohort_definition_id subject_id cohort_start_date cohort_end_date #>                   <int>      <int> <date>            <date>          #>  1                    1          1 1996-12-22        1998-03-13      #>  2                    1         16 2019-04-02        2020-06-06      #>  3                    1         26 2018-06-25        2019-11-09      #>  4                    1         87 2019-06-24        2022-02-19      #>  5                    1         95 2016-04-09        2021-11-10      #>  6                    1         57 2021-02-19        2021-02-27      #>  7                    1         66 2017-11-24        2018-02-13      #>  8                    1         41 2005-07-25        2005-12-21      #>  9                    1         58 2005-03-29        2007-08-15      #> 10                    1         73 2009-10-02        2009-12-16      #> # ℹ more rows cdm1 <- generateConceptCohortSet(cdm,   conceptSet = conceptSet_code,   name = \"asthma_3\",   end = \"observation_period_end_date\",   requiredObservation = c(1, 1),   overwrite = TRUE ) cdm1$asthma_3 #> # Source:   table<main.asthma_3> [?? x 4] #> # Database: DuckDB v0.9.1 [unknown@Linux 6.2.0-1014-azure:R 4.3.1/:memory:] #>    cohort_definition_id subject_id cohort_start_date cohort_end_date #>                   <int>      <int> <date>            <date>          #>  1                    1         87 2019-06-24        2022-11-05      #>  2                    1         95 2016-04-09        2022-05-13      #>  3                    1         57 2021-02-19        2021-03-10      #>  4                    1         41 2005-07-25        2006-11-18      #>  5                    1         58 2005-03-29        2012-07-14      #>  6                    1         73 2009-10-02        2011-08-12      #>  7                    1         10 2021-08-16        2022-03-30      #>  8                    1         18 2001-01-11        2004-09-26      #>  9                    1         29 2021-05-27        2021-06-07      #> 10                    1         34 2008-12-23        2016-12-13      #> # ℹ more rows  cohortCount(cdm1$asthma_3) #> # A tibble: 1 × 3 #>   cohort_definition_id number_records number_subjects #>                  <int>          <dbl>           <dbl> #> 1                    1             48              48  cohortAttrition(cdm1$asthma_3) #> # A tibble: 1 × 7 #>   cohort_definition_id number_records number_subjects reason_id reason           #>                  <int>          <dbl>           <dbl>     <dbl> <chr>            #> 1                    1             48              48         1 Qualifying init… #> # ℹ 2 more variables: excluded_records <dbl>, excluded_subjects <dbl>"},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/articles/Intro_create_cohort.html","id":"generatedrugutilisationcohortset","dir":"Articles","previous_headings":"Create cohort","what":"generateDrugUtilisationCohortSet()","title":"Use DrugUtilisation to create cohort","text":"Now let’s try function DrugUtilisation::generateDrugUtilisationCohortSet() get drug cohort ingredient simvastatin. function lot options can set. first use default settings:","code":"cdm2 <- generateDrugUtilisationCohortSet(cdm,   name = \"dus_alleras\",   conceptSet = conceptSet_ingredient ) cdm2$dus_alleras #> # Source:   table<main.dus_alleras> [?? x 4] #> # Database: DuckDB v0.9.1 [unknown@Linux 6.2.0-1014-azure:R 4.3.1/:memory:] #>    cohort_definition_id subject_id cohort_start_date cohort_end_date #>                   <int>      <dbl> <date>            <date>          #>  1                    1         89 2018-08-26        2018-11-02      #>  2                    1         29 2020-10-11        2021-02-07      #>  3                    1         57 2020-09-14        2020-11-26      #>  4                    1         21 1995-07-02        2002-05-12      #>  5                    1        100 2022-10-20        2022-10-24      #>  6                    1          8 2018-09-21        2021-01-18      #>  7                    1         19 2022-05-26        2022-05-26      #>  8                    1         82 2014-05-07        2017-08-03      #>  9                    1         89 2016-12-24        2017-02-04      #> 10                    1         94 2002-12-09        2003-01-24      #> # ℹ more rows  cohortCount(cdm2$dus_alleras) #> # A tibble: 1 × 3 #>   cohort_definition_id number_records number_subjects #>                  <int>          <dbl>           <dbl> #> 1                    1             53              48  cohortAttrition(cdm2$dus_alleras) %>% select(number_records, reason, excluded_records, excluded_subjects) #> # A tibble: 8 × 4 #>   number_records reason                       excluded_records excluded_subjects #>            <dbl> <chr>                                   <dbl>             <dbl> #> 1             58 \"Qualifying initial records\"                0                 0 #> 2             58 \"Duration imputation; affec…                0                 0 #> 3             53 \"Join eras\"                                 5                 0 #> 4             53 \"prior use wahout of 0 days\"                0                 0 #> 5             53 \"at least 0 prior observati…                0                 0 #> 6             53 \"cohort_start_date >= NA\"                   0                 0 #> 7             53 \"cohort_end_date <= NA\"                     0                 0 #> 8             53 \"limit: all applied\"                        0                 0"},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/articles/Intro_create_cohort.html","id":"imputeduration-and-durationrange","dir":"Articles","previous_headings":"Create cohort > generateDrugUtilisationCohortSet()","what":"imputeDuration and durationRange","title":"Use DrugUtilisation to create cohort","text":"parameter durationRange specifies range within duration must fall, duration = end date - start date + 1. Default c(1, Inf). numeric vector length two, NAs first value equal smaller second one. Duration values outside durationRange imputed using imputeDuration. can ne set : “none”, “median”, “mean”, “mode” integer (count).","code":"cdm3 <- generateDrugUtilisationCohortSet(cdm,   name = \"dus_step2_0_inf\",   conceptSet = conceptSet_ingredient,   imputeDuration = \"none\",   durationRange = c(0, Inf) # default as c(1, Inf) )  cohortAttrition(cdm3$dus_step2_0_inf) %>% select(number_records, reason, excluded_records, excluded_subjects) #> # A tibble: 8 × 4 #>   number_records reason                       excluded_records excluded_subjects #>            <dbl> <chr>                                   <dbl>             <dbl> #> 1             58 \"Qualifying initial records\"                0                 0 #> 2             58 \"Duration imputation; affec…                0                 0 #> 3             53 \"Join eras\"                                 5                 0 #> 4             53 \"prior use wahout of 0 days\"                0                 0 #> 5             53 \"at least 0 prior observati…                0                 0 #> 6             53 \"cohort_start_date >= NA\"                   0                 0 #> 7             53 \"cohort_end_date <= NA\"                     0                 0 #> 8             53 \"limit: all applied\"                        0                 0"},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/articles/Intro_create_cohort.html","id":"gapera","dir":"Articles","previous_headings":"Create cohort > generateDrugUtilisationCohortSet()","what":"gapEra","title":"Use DrugUtilisation to create cohort","text":"gapEra parameter defines number days two continuous drug exposures considered era. Now let’s change 0 larger number. dus_step3_alleras cohort attrition, can see joining era STEP 3, resulted less records, compared dus_step2_0_inf cohort, exposures less 30 days gaps joined.","code":"cdm4 <- generateDrugUtilisationCohortSet(cdm,   name = \"dus_step3_alleras\",   conceptSet = conceptSet_ingredient,   imputeDuration = \"none\",   durationRange = c(0, Inf),   gapEra = 30 # default as 0 )  cohortAttrition(cdm4$dus_step3_alleras) %>% select(number_records, reason, excluded_records, excluded_subjects) #> # A tibble: 8 × 4 #>   number_records reason                       excluded_records excluded_subjects #>            <dbl> <chr>                                   <dbl>             <dbl> #> 1             58 \"Qualifying initial records\"                0                 0 #> 2             58 \"Duration imputation; affec…                0                 0 #> 3             51 \"Join eras\"                                 7                 0 #> 4             51 \"prior use wahout of 0 days\"                0                 0 #> 5             51 \"at least 0 prior observati…                0                 0 #> 6             51 \"cohort_start_date >= NA\"                   0                 0 #> 7             51 \"cohort_end_date <= NA\"                     0                 0 #> 8             51 \"limit: all applied\"                        0                 0"},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/articles/Intro_create_cohort.html","id":"priorusewashout","dir":"Articles","previous_headings":"Create cohort > generateDrugUtilisationCohortSet()","what":"priorUseWashout","title":"Use DrugUtilisation to create cohort","text":"priorUseWashout parameter specifiesthe number prior days without exposure (often termed ‘washout’) required. default, set NULL, meaning washout period necessary. example provided, observe reduction number records STEP 4 cohort dus_alleras_step4 due washout period required, compared dus_step3_alleras cohort.","code":"cdm5 <- generateDrugUtilisationCohortSet(cdm,   name = \"dus_alleras_step4\",   conceptSet = conceptSet_ingredient,   imputeDuration = \"none\",   durationRange = c(0, Inf),   gapEra = 30,   priorUseWashout = 30 )  cohortAttrition(cdm5$dus_alleras_step4) %>% select(number_records, reason, excluded_records, excluded_subjects) #> # A tibble: 8 × 4 #>   number_records reason                       excluded_records excluded_subjects #>            <dbl> <chr>                                   <dbl>             <dbl> #> 1             58 \"Qualifying initial records\"                0                 0 #> 2             58 \"Duration imputation; affec…                0                 0 #> 3             51 \"Join eras\"                                 7                 0 #> 4             51 \"prior use wahout of 30 day…                0                 0 #> 5             51 \"at least 0 prior observati…                0                 0 #> 6             51 \"cohort_start_date >= NA\"                   0                 0 #> 7             51 \"cohort_end_date <= NA\"                     0                 0 #> 8             51 \"limit: all applied\"                        0                 0"},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/articles/Intro_create_cohort.html","id":"priorobservation","dir":"Articles","previous_headings":"Create cohort > generateDrugUtilisationCohortSet()","what":"priorObservation","title":"Use DrugUtilisation to create cohort","text":"parameter priorObservation defines minimum number days prior observation necessary drug eras taken account. set NULL, drug eras required fall within observation_period. example, noticeable decrease number records dus_alleras_step5 cohort STEP 5 compared dus_alleras_step4 cohort.","code":"cdm6 <- generateDrugUtilisationCohortSet(cdm,   name = \"dus_alleras_step5\",   conceptSet = conceptSet_ingredient,   imputeDuration = \"none\",   durationRange = c(0, Inf),   gapEra = 30,   priorUseWashout = 30,   priorObservation = 30 )  cohortAttrition(cdm6$dus_alleras_step5) %>% select(number_records, reason, excluded_records, excluded_subjects) #> # A tibble: 8 × 4 #>   number_records reason                       excluded_records excluded_subjects #>            <dbl> <chr>                                   <dbl>             <dbl> #> 1             58 \"Qualifying initial records\"                0                 0 #> 2             58 \"Duration imputation; affec…                0                 0 #> 3             51 \"Join eras\"                                 7                 0 #> 4             51 \"prior use wahout of 30 day…                0                 0 #> 5             48 \"at least 30 prior observat…                3                 2 #> 6             48 \"cohort_start_date >= NA\"                   0                 0 #> 7             48 \"cohort_end_date <= NA\"                     0                 0 #> 8             48 \"limit: all applied\"                        0                 0"},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/articles/Intro_create_cohort.html","id":"cohortdaterange","dir":"Articles","previous_headings":"Create cohort > generateDrugUtilisationCohortSet()","what":"cohortDateRange","title":"Use DrugUtilisation to create cohort","text":"cohortDateRange parameter defines range cohort_start_date cohort_end_date. following example, one can observe reduction STEP 6 STEP 7 due constraints imposed cohort start end dates.","code":"cdm7 <- generateDrugUtilisationCohortSet(cdm,   name = \"dus_alleras_step67\",   conceptSet = conceptSet_ingredient,   imputeDuration = \"none\",   durationRange = c(0, Inf),   gapEra = 30,   priorUseWashout = 30,   priorObservation = 30,   cohortDateRange = as.Date(c(\"2010-01-01\", \"2011-01-01\")),   limi = \"All\" )  cohortAttrition(cdm7$dus_alleras_step67) %>% select(number_records, reason, excluded_records, excluded_subjects) #> # A tibble: 8 × 4 #>   number_records reason                       excluded_records excluded_subjects #>            <dbl> <chr>                                   <dbl>             <dbl> #> 1             58 \"Qualifying initial records\"                0                 0 #> 2             58 \"Duration imputation; affec…                0                 0 #> 3             51 \"Join eras\"                                 7                 0 #> 4             51 \"prior use wahout of 30 day…                0                 0 #> 5             48 \"at least 30 prior observat…                3                 2 #> 6             34 \"cohort_start_date >= 2010-…               14                14 #> 7              4 \"cohort_end_date <= 2011-01…               30                28 #> 8              4 \"limit: All applied\"                        0                 0"},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/articles/Intro_create_cohort.html","id":"limit-first-era-that-fulfills-the-criteria","dir":"Articles","previous_headings":"Create cohort > generateDrugUtilisationCohortSet()","what":"limit: First era that fulfills the criteria","title":"Use DrugUtilisation to create cohort","text":"Change limit parameter First observe impacts attrition dus_step8_firstera cohort comparison dus_alleras_step67 cohort. number records decreased STEP 8 First limit. gets first record fulfills criteria.","code":"cdm8 <- generateDrugUtilisationCohortSet(cdm,   name = \"dus_step8_firstera\",   conceptSet = conceptSet_ingredient,   imputeDuration = \"none\",   durationRange = c(0, Inf),   gapEra = 30,   priorUseWashout = 30,   priorObservation = 30,   cohortDateRange = as.Date(c(\"2010-01-01\", \"2011-01-01\")),   limit = \"First\" )  cohortAttrition(cdm8$dus_step8_firstera) %>% select(number_records, reason, excluded_records, excluded_subjects) #> # A tibble: 8 × 4 #>   number_records reason                       excluded_records excluded_subjects #>            <dbl> <chr>                                   <dbl>             <dbl> #> 1             58 \"Qualifying initial records\"                0                 0 #> 2             58 \"Duration imputation; affec…                0                 0 #> 3             51 \"Join eras\"                                 7                 0 #> 4             51 \"prior use wahout of 30 day…                0                 0 #> 5             48 \"at least 30 prior observat…                3                 2 #> 6             34 \"cohort_start_date >= 2010-…               14                14 #> 7              4 \"cohort_end_date <= 2011-01…               30                28 #> 8              4 \"limit: First applied\"                      0                 0"},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/articles/Intro_create_cohort.html","id":"limit-first-ever-era","dir":"Articles","previous_headings":"Create cohort > generateDrugUtilisationCohortSet()","what":"limit: First ever era","title":"Use DrugUtilisation to create cohort","text":"parameter limit allows First. First value represents first era meets criteria set parameters prior limit. However, goal get first-ever era, can achieved using function . Setting following parameter result first ever drug era: Constructing concept sets generating various cohorts initial steps conducting drug utilization study. guidance using getting information like characteristics cohorts, please refer vignettes.","code":"cdm8 <- generateDrugUtilisationCohortSet(cdm,   name = \"dus_step8_firstever\",   conceptSet = conceptSet_ingredient,   imputeDuration = \"none\",   durationRange = c(0, Inf),   gapEra = 0,   priorUseWashout = Inf,   priorObservation = 0,   cohortDateRange = as.Date(c(NA, NA)),   limit = \"First\" ) DBI::dbDisconnect(con, shutdown = TRUE)"},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/articles/addIndications-example.html","id":"introduction","dir":"Articles","previous_headings":"","what":"Introduction","title":"Add indications to Drug Utilisation Cohort","text":"vignette, demonstrate use addIndications function establish binary indicator drug utilisation cohort another concept-based cohort. drug Utilisation package designed work data OMOP CDM format, first step create reference data using DBI CDMConnector packages. connection Postgres database look like:","code":"library(DrugUtilisation) library(DBI) library(duckdb) library(CDMConnector) library(CodelistGenerator) library(dplyr) library(PatientProfiles)   con <- DBI::dbConnect(duckdb::duckdb(), eunomia_dir())  cdm <- CDMConnector::cdm_from_con(   con = con,   cdm_schema = \"main\",   write_schema = \"main\" )"},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/articles/addIndications-example.html","id":"create-a-drug-utilisation-cohort","dir":"Articles","previous_headings":"","what":"Create a drug utilisation cohort","title":"Add indications to Drug Utilisation Cohort","text":"use Acetaminophen example drug construct drug utilisation cohort. begin, ’ll employ “codelistGenerator” generate concept list associated Acetaminophen. Next, can create drug utilization cohort using conceptList “generateDrugUtilisationCohortSet” function. better understanding arguments functionaities “generateDrugUtilisationCohortSet”, please refer “Create Cohort” vignette.","code":"# using CodelistGenerator conceptList <- CodelistGenerator::getDrugIngredientCodes(cdm, \"acetaminophen\") conceptList #> $acetaminophen #> [1]  1125315  1127078  1127433 40229134 40231925 40162522 19133768 cdm <- generateDrugUtilisationCohortSet(   cdm = cdm,   name = \"acetaminophen_users\",   conceptSet = conceptList,   limit = \"All\",   gapEra = 30,   priorUseWashout = 0 )"},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/articles/addIndications-example.html","id":"create-a-indication-cohort","dir":"Articles","previous_headings":"","what":"Create a indication cohort","title":"Add indications to Drug Utilisation Cohort","text":"Next going create indications cohort indicate patients sinusitis bronchitis. can done using generateConceptCohortSet().","code":"indications <-   list(     sinusitis = c(257012, 4294548, 40481087),     bronchitis = c(260139, 258780)   )  cdm <-   generateConceptCohortSet(cdm, name = \"indications_cohort\", indications)  cohortCount(cdm[[\"indications_cohort\"]]) %>%   left_join(     cohortSet(cdm[[\"indications_cohort\"]]) %>%       select(cohort_definition_id, cohort_name),     by = \"cohort_definition_id\"   ) #> # A tibble: 2 × 4 #>   cohort_definition_id number_records number_subjects cohort_name #>                  <int>          <dbl>           <dbl> <chr>       #> 1                    1           2688            2688 sinusitis   #> 2                    2           2546            2546 bronchitis"},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/articles/addIndications-example.html","id":"add-indications","dir":"Articles","previous_headings":"","what":"Add indications","title":"Add indications to Drug Utilisation Cohort","text":"add indication drug Utilisation cohort can simple use addIndication function. example provided . function argument specify indication gaps. indication gaps defined gap event indication. also allow user specify tables look unknown indication.","code":"cdm[[\"acetaminophen_users\"]] %>%   addIndication(     cdm = cdm,      indicationCohortName = \"indications_cohort\",     indicationGap =  c(0, 30, 365),     unknownIndicationTable =  c(\"condition_occurrence\")   ) #> # Source:   table<dbplyr_037> [?? x 16] #> # Database: DuckDB v0.9.1 [unknown@Linux 6.2.0-1014-azure:R 4.3.1//tmp/RtmpUXMYBB/file1c07558d3ef5.duckdb] #>    cohort_definition_id subject_id cohort_start_date cohort_end_date #>                   <int>      <dbl> <date>            <date>          #>  1                    1         78 1968-11-25        1968-12-16      #>  2                    1         78 1991-10-28        1991-11-04      #>  3                    1        141 1987-03-16        1987-03-30      #>  4                    1        141 1987-10-31        1987-11-14      #>  5                    1        141 1995-07-30        1995-09-28      #>  6                    1        260 1974-03-05        1974-03-19      #>  7                    1        260 1979-09-06        1979-09-13      #>  8                    1        260 1990-08-10        1990-09-16      #>  9                    1        300 2005-06-16        2005-06-30      #> 10                    1        300 2007-08-21        2007-08-28      #> # ℹ more rows #> # ℹ 12 more variables: indication_gap_0_bronchitis <dbl>, #> #   indication_gap_0_sinusitis <dbl>, indication_gap_0_none <dbl>, #> #   indication_gap_30_sinusitis <dbl>, indication_gap_30_bronchitis <dbl>, #> #   indication_gap_30_none <dbl>, indication_gap_365_bronchitis <dbl>, #> #   indication_gap_365_sinusitis <dbl>, indication_gap_365_none <dbl>, #> #   indication_gap_0_unknown <dbl>, indication_gap_30_unknown <dbl>, …"},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/articles/addIndications-example.html","id":"summarise-indications","dir":"Articles","previous_headings":"","what":"Summarise Indications","title":"Add indications to Drug Utilisation Cohort","text":"create summary table indications cohort, can use summariseIndication function. can also summarize indications using strata argument summariseIndication function. example , summarized ageGroup sex.","code":"cdm[[\"acetaminophen_users\"]] %>%   addIndication(     cdm = cdm,      indicationCohortName = \"indications_cohort\",     indicationGap =  c(0, 30, 365),     unknownIndicationTable =  c(\"condition_occurrence\")   ) %>%   summariseIndication(cdm) %>%   select(\"variable\", \"estimate_type\", \"estimate\") #> # A tibble: 26 × 3 #>    variable                        estimate_type estimate          #>    <chr>                           <chr>         <chr>             #>  1 number subjects                 count         2679              #>  2 number records                  count         13860             #>  3 Indication on index date        count         2518              #>  4 Indication on index date        percentage    18.1673881673882  #>  5 Indication on index date        count         <5                #>  6 Indication on index date        percentage    NA                #>  7 Indication on index date        count         163               #>  8 Indication on index date        percentage    1.17604617604618  #>  9 Indication during prior 30 days count         21                #> 10 Indication during prior 30 days percentage    0.151515151515152 #> # ℹ 16 more rows cdm[[\"acetaminophen_users\"]] %>%   addDemographics(ageGroup = list(c(0, 19), c(20, 150))) %>%   addIndication(     cdm = cdm,     indicationCohortName = \"indications_cohort\",     indicationGap =  c(0),     unknownIndicationTable =  c(\"condition_occurrence\")   ) %>%   summariseIndication(     cdm,     strata = list(\"age\" = \"age_group\", \"sex\" = \"sex\")) %>%       select(\"variable\", \"estimate_type\", \"estimate\",\"strata_name\") #> # A tibble: 50 × 4 #>    variable                 estimate_type estimate         strata_name #>    <chr>                    <chr>         <chr>            <chr>       #>  1 number subjects          count         2679             Overall     #>  2 number records           count         13860            Overall     #>  3 Indication on index date count         2518             Overall     #>  4 Indication on index date percentage    18.1673881673882 Overall     #>  5 Indication on index date count         <5               Overall     #>  6 Indication on index date percentage    NA               Overall     #>  7 Indication on index date count         163              Overall     #>  8 Indication on index date percentage    1.17604617604618 Overall     #>  9 Indication on index date count         11178            Overall     #> 10 Indication on index date percentage    80.6493506493507 Overall     #> # ℹ 40 more rows"},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/authors.html","id":null,"dir":"","previous_headings":"","what":"Authors","title":"Authors and Citation","text":"Marti Catala. Author, maintainer. Mike Du. Author. Yuchen Guo. Author. Kim Lopez-Guell. Author. Edward Burn. Contributor. Xintong Li. Contributor.","code":""},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/authors.html","id":"citation","dir":"","previous_headings":"","what":"Citation","title":"Authors and Citation","text":"Catala M, Du M, Guo Y, Lopez-Guell K (2023). DrugUtilisation: Summarise Patient-Level Drug Utilisation Data Mapped OMOP Common Data Model. R package version 0.4.0, https://darwin-eu-dev.github.io/DrugUtilisation/.","code":"@Manual{,   title = {DrugUtilisation: Summarise Patient-Level Drug Utilisation in Data Mapped to the OMOP Common Data Model},   author = {Marti Catala and Mike Du and Yuchen Guo and Kim Lopez-Guell},   year = {2023},   note = {R package version 0.4.0},   url = {https://darwin-eu-dev.github.io/DrugUtilisation/}, }"},{"path":[]},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/index.html","id":"warning-this-package-is-under-development","dir":"","previous_headings":"","what":"WARNING: This package is under development.","title":"Summarise Patient-Level Drug Utilisation in Data Mapped to the OMOP \n    Common Data Model ","text":"addDailyDose function works following patterns drug_strength table:","code":""},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/index.html","id":"package-overview","dir":"","previous_headings":"","what":"Package overview","title":"Summarise Patient-Level Drug Utilisation in Data Mapped to the OMOP \n    Common Data Model ","text":"DrugUtilisation contains functions instantiate characterize cohorts used Drug Utilisation Study OMOP common data model. Main functionalities : Create DrugUtilisation cohorts Add indications cohort Add dosage certain ingredient (subseted list drugs) Calculate daily dose Create Concept based cohorts Read concepts json files Summarise drug use certain cohort Summarise indications certain cohort Summarise patients characteristics certain cohort Summarise patients large scale characterics certain cohort","code":""},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/index.html","id":"example","dir":"","previous_headings":"","what":"Example","title":"Summarise Patient-Level Drug Utilisation in Data Mapped to the OMOP \n    Common Data Model ","text":"First, need create cdm reference data ´ll using. ´ll generate example simulated data, see set database please consult CDMConnector package connection examples. package also provides functionality generate mockDrugUtilisation cdm reference:","code":"library(DrugUtilisation) cdm <- mockDrugUtilisation(numberIndividual = 100)"},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/index.html","id":"create-a-cohort-of-drug-use","dir":"","previous_headings":"Example","what":"Create a cohort of drug use","title":"Summarise Patient-Level Drug Utilisation in Data Mapped to the OMOP \n    Common Data Model ","text":"create cohort need conceptList, can read json files: can build list using packages (e.g. CodelistGenerator) generate cohort drug use use generateDrugUtilisationCohortSet:","code":"conceptList <- readConceptList(here::here(\"Concepts\"), cdm) library(CodelistGenerator) conceptList <- getDrugIngredientCodes(cdm, \"acetaminophen\") conceptList #> $`Ingredient: acetaminophen (1125315)` #> [1]  1125315  1125360  2905077 43135274 cdm <- generateDrugUtilisationCohortSet(   cdm = cdm,   name = \"dus_cohort\",   conceptSet = conceptList,   limit = \"first\",   priorObservation = 365,   gapEra = 30,   priorUseWashout = 0,   imputeDuration = \"none\",    durationRange = c(0, Inf) )"},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/index.html","id":"cohort-attributes","dir":"","previous_headings":"Example > Create a cohort of drug use","what":"Cohort attributes","title":"Summarise Patient-Level Drug Utilisation in Data Mapped to the OMOP \n    Common Data Model ","text":"generated cohort GeneratedCohortSet seen CDMConnector Cohort set: Cohort count: Cohort attrition:","code":"class(cdm[[\"dus_cohort\"]]) #> [1] \"GeneratedCohortSet\"    \"tbl_duckdb_connection\" \"tbl_dbi\"               #> [4] \"tbl_sql\"               \"tbl_lazy\"              \"tbl\" library(CDMConnector) library(dplyr) #>  #> Attaching package: 'dplyr' #> The following objects are masked from 'package:stats': #>  #>     filter, lag #> The following objects are masked from 'package:base': #>  #>     intersect, setdiff, setequal, union cohortSet(cdm[[\"dus_cohort\"]]) %>% glimpse() #> Rows: 1 #> Columns: 11 #> $ cohort_definition_id    <int> 1 #> $ cohort_name             <chr> \"Ingredient: acetaminophen (1125315)\" #> $ limit                   <chr> \"first\" #> $ prior_observation       <chr> \"365\" #> $ gap_era                 <chr> \"30\" #> $ prior_use_washout       <chr> \"0\" #> $ cohort_date_range_start <chr> NA #> $ cohort_date_range_end   <chr> NA #> $ impute_duration         <chr> \"none\" #> $ duration_range_min      <chr> \"0\" #> $ duration_range_max      <chr> \"Inf\" cohortCount(cdm[[\"dus_cohort\"]]) #> # A tibble: 1 × 3 #>   cohort_definition_id number_records number_subjects #>                  <int>          <dbl>           <dbl> #> 1                    1             35              35 cohortAttrition(cdm[[\"dus_cohort\"]]) %>% glimpse() #> Rows: 8 #> Columns: 7 #> $ cohort_definition_id <int> 1, 1, 1, 1, 1, 1, 1, 1 #> $ number_records       <dbl> 90, 90, 70, 70, 41, 41, 41, 35 #> $ number_subjects      <dbl> 62, 62, 62, 62, 35, 35, 35, 35 #> $ reason_id            <dbl> 1, 2, 3, 4, 5, 6, 7, 8 #> $ reason               <chr> \"Qualifying initial records\", \"Duration imputatio… #> $ excluded_records     <dbl> 0, 0, 20, 0, 29, 0, 0, 6 #> $ excluded_subjects    <dbl> 0, 0, 0, 0, 27, 0, 0, 0"},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/index.html","id":"indication","dir":"","previous_headings":"Example","what":"Indication","title":"Summarise Patient-Level Drug Utilisation in Data Mapped to the OMOP \n    Common Data Model ","text":"Indications always cohorts. option package create concept based cohorts using generateConceptCohortSet. can add indication using function addIndication. add new column indication gap indication. can combine indications single column using indicationToStrata() function. column can used stratification results needed:","code":"indications <- list(headache = 378253, influenza = 4266367) cdm <- generateConceptCohortSet(cdm, indications, \"indications_cohort\") cohortCount(cdm[[\"indications_cohort\"]]) #> # A tibble: 2 × 3 #>   cohort_definition_id number_records number_subjects #>                  <int>          <dbl>           <dbl> #> 1                    2             46              46 #> 2                    1             52              52 x <- cdm[[\"dus_cohort\"]] %>%   addIndication(     cdm = cdm, indicationCohortName = \"indications_cohort\", indicationGap = c(0, 30, 365),      unknownIndicationTable = c(\"condition_occurrence\")   ) glimpse(x) #> Rows: ?? #> Columns: 16 #> Database: DuckDB 0.9.0 [martics@Windows 10 x64:R 4.2.3/:memory:] #> $ cohort_definition_id         <int> 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,… #> $ subject_id                   <dbl> 7, 48, 57, 77, 3, 58, 73, 23, 40, 45, 51,… #> $ cohort_start_date            <date> 1969-09-09, 1972-04-14, 2020-04-17, 1967… #> $ cohort_end_date              <date> 1970-02-14, 1972-12-18, 2020-11-19, 1967… #> $ indication_gap_0_influenza   <dbl> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,… #> $ indication_gap_0_headache    <dbl> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,… #> $ indication_gap_0_none        <dbl> 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,… #> $ indication_gap_30_headache   <dbl> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,… #> $ indication_gap_30_influenza  <dbl> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,… #> $ indication_gap_30_none       <dbl> 1, 1, 1, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,… #> $ indication_gap_365_headache  <dbl> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0,… #> $ indication_gap_365_influenza <dbl> 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,… #> $ indication_gap_365_none      <dbl> 1, 1, 0, 0, 1, 1, 0, 1, 1, 1, 0, 1, 1, 1,… #> $ indication_gap_0_unknown     <dbl> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,… #> $ indication_gap_30_unknown    <dbl> 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,… #> $ indication_gap_365_unknown   <dbl> 0, 0, 0, 1, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0,… x <- x %>% indicationToStrata(keep = TRUE) glimpse(x) #> Rows: ?? #> Columns: 19 #> Database: DuckDB 0.9.0 [martics@Windows 10 x64:R 4.2.3/:memory:] #> $ cohort_definition_id         <int> 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,… #> $ subject_id                   <dbl> 7, 48, 57, 77, 3, 58, 73, 23, 40, 45, 51,… #> $ cohort_start_date            <date> 1969-09-09, 1972-04-14, 2020-04-17, 1967… #> $ cohort_end_date              <date> 1970-02-14, 1972-12-18, 2020-11-19, 1967… #> $ indication_gap_0_influenza   <dbl> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,… #> $ indication_gap_0_headache    <dbl> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,… #> $ indication_gap_0_none        <dbl> 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,… #> $ indication_gap_30_headache   <dbl> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,… #> $ indication_gap_30_influenza  <dbl> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,… #> $ indication_gap_30_none       <dbl> 1, 1, 1, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,… #> $ indication_gap_365_headache  <dbl> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0,… #> $ indication_gap_365_influenza <dbl> 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,… #> $ indication_gap_365_none      <dbl> 1, 1, 0, 0, 1, 1, 0, 1, 1, 1, 0, 1, 1, 1,… #> $ indication_gap_0_unknown     <dbl> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,… #> $ indication_gap_30_unknown    <dbl> 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,… #> $ indication_gap_365_unknown   <dbl> 0, 0, 0, 1, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0,… #> $ indication_gap_0             <chr> \"None\", \"None\", \"None\", \"None\", \"None\", \"… #> $ indication_gap_30            <chr> \"None\", \"None\", \"None\", \"Unknown\", \"None\"… #> $ indication_gap_365           <chr> \"None\", \"None\", \"Influenza\", \"Unknown\", \"… table(x %>% pull(\"indication_gap_365\")) #>  #>  Headache Influenza      None   Unknown  #>         2         3        27         3"},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/index.html","id":"summarise-the-indication","dir":"","previous_headings":"Example","what":"Summarise the indication","title":"Summarise Patient-Level Drug Utilisation in Data Mapped to the OMOP \n    Common Data Model ","text":"can summarise indication results using summariseIndication function:","code":"summariseIndication(x, cdm) #> # A tibble: 40 × 11 #>    group_name  group_level      strata_name strata_level variable variable_level #>    <chr>       <chr>            <chr>       <chr>        <chr>    <chr>          #>  1 cohort_name Ingredient: ace… Overall     Overall      number … <NA>           #>  2 cohort_name Ingredient: ace… Overall     Overall      number … <NA>           #>  3 cohort_name Ingredient: ace… Overall     Overall      Indicat… Influenza      #>  4 cohort_name Ingredient: ace… Overall     Overall      Indicat… Influenza      #>  5 cohort_name Ingredient: ace… Overall     Overall      Indicat… Headache       #>  6 cohort_name Ingredient: ace… Overall     Overall      Indicat… Headache       #>  7 cohort_name Ingredient: ace… Overall     Overall      Indicat… None           #>  8 cohort_name Ingredient: ace… Overall     Overall      Indicat… None           #>  9 cohort_name Ingredient: ace… Overall     Overall      Indicat… Headache       #> 10 cohort_name Ingredient: ace… Overall     Overall      Indicat… Headache       #> # ℹ 30 more rows #> # ℹ 5 more variables: variable_type <chr>, estimate_type <chr>, estimate <chr>, #> #   cdm_name <chr>, result_type <chr> summariseIndication(x, cdm) %>% glimpse() #> Rows: 40 #> Columns: 11 #> $ group_name     <chr> \"cohort_name\", \"cohort_name\", \"cohort_name\", \"cohort_na… #> $ group_level    <chr> \"Ingredient: acetaminophen (1125315)\", \"Ingredient: ace… #> $ strata_name    <chr> \"Overall\", \"Overall\", \"Overall\", \"Overall\", \"Overall\", … #> $ strata_level   <chr> \"Overall\", \"Overall\", \"Overall\", \"Overall\", \"Overall\", … #> $ variable       <chr> \"number subjects\", \"number records\", \"Indication on ind… #> $ variable_level <chr> NA, NA, \"Influenza\", \"Influenza\", \"Headache\", \"Headache… #> $ variable_type  <chr> NA, NA, \"binary\", \"binary\", \"binary\", \"binary\", \"binary… #> $ estimate_type  <chr> \"count\", \"count\", \"count\", \"percentage\", \"count\", \"perc… #> $ estimate       <chr> \"35\", \"35\", \"0\", \"0\", \"0\", \"0\", \"35\", \"100\", \"0\", \"0\", … #> $ cdm_name       <chr> \"DUS MOCK\", \"DUS MOCK\", \"DUS MOCK\", \"DUS MOCK\", \"DUS MO… #> $ result_type    <chr> \"Summary indication\", \"Summary indication\", \"Summary in…"},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/index.html","id":"add-strata","dir":"","previous_headings":"Example","what":"Add strata","title":"Summarise Patient-Level Drug Utilisation in Data Mapped to the OMOP \n    Common Data Model ","text":"summarise functions option add strata. Strata always point preexisting columns. can see example create age_group sex columns using PatientProfiles use strata","code":"library(PatientProfiles) x <- x %>%   addAge(cdm, ageGroup = list(c(0, 19), c(20, 39), c(40, 59), c(60, 79), c(80, 150))) %>%   addSex(cdm) summariseIndication(x, cdm, strata = list(\"age_group\", \"sex\", c(\"age_group\", \"sex\"))) #> # A tibble: 440 × 11 #>    group_name  group_level      strata_name strata_level variable variable_level #>    <chr>       <chr>            <chr>       <chr>        <chr>    <chr>          #>  1 cohort_name Ingredient: ace… Overall     Overall      number … <NA>           #>  2 cohort_name Ingredient: ace… Overall     Overall      number … <NA>           #>  3 cohort_name Ingredient: ace… Overall     Overall      Indicat… Influenza      #>  4 cohort_name Ingredient: ace… Overall     Overall      Indicat… Influenza      #>  5 cohort_name Ingredient: ace… Overall     Overall      Indicat… Headache       #>  6 cohort_name Ingredient: ace… Overall     Overall      Indicat… Headache       #>  7 cohort_name Ingredient: ace… Overall     Overall      Indicat… None           #>  8 cohort_name Ingredient: ace… Overall     Overall      Indicat… None           #>  9 cohort_name Ingredient: ace… Overall     Overall      Indicat… Headache       #> 10 cohort_name Ingredient: ace… Overall     Overall      Indicat… Headache       #> # ℹ 430 more rows #> # ℹ 5 more variables: variable_type <chr>, estimate_type <chr>, estimate <chr>, #> #   cdm_name <chr>, result_type <chr> summariseIndication(x, cdm, strata = list(\"age_group\", \"sex\", c(\"age_group\", \"sex\"))) %>% glimpse() #> Rows: 440 #> Columns: 11 #> $ group_name     <chr> \"cohort_name\", \"cohort_name\", \"cohort_name\", \"cohort_na… #> $ group_level    <chr> \"Ingredient: acetaminophen (1125315)\", \"Ingredient: ace… #> $ strata_name    <chr> \"Overall\", \"Overall\", \"Overall\", \"Overall\", \"Overall\", … #> $ strata_level   <chr> \"Overall\", \"Overall\", \"Overall\", \"Overall\", \"Overall\", … #> $ variable       <chr> \"number subjects\", \"number records\", \"Indication on ind… #> $ variable_level <chr> NA, NA, \"Influenza\", \"Influenza\", \"Headache\", \"Headache… #> $ variable_type  <chr> NA, NA, \"binary\", \"binary\", \"binary\", \"binary\", \"binary… #> $ estimate_type  <chr> \"count\", \"count\", \"count\", \"percentage\", \"count\", \"perc… #> $ estimate       <chr> \"35\", \"35\", \"0\", \"0\", \"0\", \"0\", \"35\", \"100\", \"0\", \"0\", … #> $ cdm_name       <chr> \"DUS MOCK\", \"DUS MOCK\", \"DUS MOCK\", \"DUS MOCK\", \"DUS MO… #> $ result_type    <chr> \"Summary indication\", \"Summary indication\", \"Summary in…"},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/index.html","id":"daily-dose","dir":"","previous_headings":"Example","what":"Daily dose","title":"Summarise Patient-Level Drug Utilisation in Data Mapped to the OMOP \n    Common Data Model ","text":"can compute daily dose certain ingredient subset drug_exposure whole drug exposure (can computationally expensive).","code":"#cdm[[\"drug_exposure\"]] %>% #  addDailyDose(ingredientConceptId = 1125315) %>% #  glimpse()"},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/index.html","id":"coverage","dir":"","previous_headings":"Example > Daily dose","what":"Coverage","title":"Summarise Patient-Level Drug Utilisation in Data Mapped to the OMOP \n    Common Data Model ","text":"Currently can evaluate coverage daily dose conceptList overall using dailyDoseCoverage. can restrict certain ingredient, otherwise result stratified ingredient.","code":"#dailyDoseCoverage(cdm = cdm, sample = NULL, ingredient = NULL, conceptList = NULL)"},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/index.html","id":"druguse","dir":"","previous_headings":"Example","what":"DrugUse","title":"Summarise Patient-Level Drug Utilisation in Data Mapped to the OMOP \n    Common Data Model ","text":"can add columns related drug use using addDrugUse. always provide reference ingredient.","code":"#x <- x %>% #  addDrugUse( #    cdm = cdm, #    ingredientConceptId = 1125315, #    initialDailyDose = TRUE, #    numberExposures = TRUE, #    duration = TRUE, #    cumulativeDose = TRUE, #    numberEras = TRUE #  )"},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/index.html","id":"summarise-the-drug-use","dir":"","previous_headings":"Example","what":"Summarise the drug use","title":"Summarise Patient-Level Drug Utilisation in Data Mapped to the OMOP \n    Common Data Model ","text":"can summarise drug use using summariseDrugUse function","code":"#summariseDrugUse(x, cdm)"},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/index.html","id":"summarise-patient-characteristics","dir":"","previous_headings":"Example","what":"Summarise patient characteristics","title":"Summarise Patient-Level Drug Utilisation in Data Mapped to the OMOP \n    Common Data Model ","text":"can summarise patient characteristics summariseCharacteristics function:","code":"summariseCharacteristics(   x, cdm, ageGroup = list(c(0, 24), c(25, 49), c(50, 74), c(75, 150)),   tableIntersect = list(     \"Visits\" = list(       tableName = \"visit_occurrence\", value = \"count\", window = c(-365, 0)     )   ),   cohortIntersect = list(     \"Indications\" = list(       targetCohortTable  = \"indications_cohort\", value = \"flag\",        window = c(-365, 0)     )   ) ) #> # A tibble: 46 × 11 #>    cdm_name result_type group_name group_level strata_name strata_level variable #>    <chr>    <chr>       <chr>      <chr>       <chr>       <chr>        <chr>    #>  1 DUS MOCK Summary ch… cohort_na… Ingredient… Overall     Overall      Number … #>  2 DUS MOCK Summary ch… cohort_na… Ingredient… Overall     Overall      Number … #>  3 DUS MOCK Summary ch… cohort_na… Ingredient… Overall     Overall      Cohort … #>  4 DUS MOCK Summary ch… cohort_na… Ingredient… Overall     Overall      Cohort … #>  5 DUS MOCK Summary ch… cohort_na… Ingredient… Overall     Overall      Cohort … #>  6 DUS MOCK Summary ch… cohort_na… Ingredient… Overall     Overall      Cohort … #>  7 DUS MOCK Summary ch… cohort_na… Ingredient… Overall     Overall      Cohort … #>  8 DUS MOCK Summary ch… cohort_na… Ingredient… Overall     Overall      Cohort … #>  9 DUS MOCK Summary ch… cohort_na… Ingredient… Overall     Overall      Cohort … #> 10 DUS MOCK Summary ch… cohort_na… Ingredient… Overall     Overall      Cohort … #> # ℹ 36 more rows #> # ℹ 4 more variables: variable_level <chr>, variable_type <chr>, #> #   estimate_type <chr>, estimate <chr>"},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/index.html","id":"summarise-patients-large-scale-characteristics","dir":"","previous_headings":"Example","what":"Summarise patients large scale characteristics","title":"Summarise Patient-Level Drug Utilisation in Data Mapped to the OMOP \n    Common Data Model ","text":"can summarise patient characteristics summariseLargeScaleCharacteristics function:","code":"summariseLargeScaleCharacteristics(   cohort = x,    window = list(c(-Inf, Inf)),    eventInWindow = \"condition_occurrence\",    episodeInWindow = \"drug_exposure\" ) #> Warning in checkNewName(ageName, x): age already exists in x, it was renamed to #> age_1 #> Warning in checkNewName(sexName, x): sex already exists in x, it was renamed to #> sex_1 #> # A tibble: 26 × 14 #>    result_type          cdm_name group_name group_level strata_name strata_level #>    <chr>                <chr>    <chr>      <chr>       <chr>       <chr>        #>  1 Summarised Large Sc… DUS MOCK Cohort na… Ingredient… Overall     Overall      #>  2 Summarised Large Sc… DUS MOCK Cohort na… Ingredient… Overall     Overall      #>  3 Summarised Large Sc… DUS MOCK Cohort na… Ingredient… Overall     Overall      #>  4 Summarised Large Sc… DUS MOCK Cohort na… Ingredient… Overall     Overall      #>  5 Summarised Large Sc… DUS MOCK Cohort na… Ingredient… Overall     Overall      #>  6 Summarised Large Sc… DUS MOCK Cohort na… Ingredient… Overall     Overall      #>  7 Summarised Large Sc… DUS MOCK Cohort na… Ingredient… Overall     Overall      #>  8 Summarised Large Sc… DUS MOCK Cohort na… Ingredient… Overall     Overall      #>  9 Summarised Large Sc… DUS MOCK Cohort na… Ingredient… Overall     Overall      #> 10 Summarised Large Sc… DUS MOCK Cohort na… Ingredient… Overall     Overall      #> # ℹ 16 more rows #> # ℹ 8 more variables: table_name <chr>, type <chr>, analysis <chr>, #> #   concept <dbl>, variable <chr>, variable_level <chr>, estimate_type <chr>, #> #   estimate <chr>"},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/reference/DrugUtilisation-package.html","id":null,"dir":"Reference","previous_headings":"","what":"DrugUtilisation: Summarise Patient-Level Drug Utilisation in Data Mapped to the OMOP Common Data Model — DrugUtilisation-package","title":"DrugUtilisation: Summarise Patient-Level Drug Utilisation in Data Mapped to the OMOP Common Data Model — DrugUtilisation-package","text":"Summarise patient-level drug utilisation cohorts using data mapped Observational Medical Outcomes Partnership (OMOP) common data model. New users prevalent users cohorts can generated characteristics, indication drug use summarised.","code":""},{"path":[]},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/reference/DrugUtilisation-package.html","id":"author","dir":"Reference","previous_headings":"","what":"Author","title":"DrugUtilisation: Summarise Patient-Level Drug Utilisation in Data Mapped to the OMOP Common Data Model — DrugUtilisation-package","text":"Maintainer: Marti Catala marti.catalasabate@ndorms.ox.ac.uk (ORCID) Authors: Mike Du mike.du@ndorms.ox.ac.uk (ORCID) Yuchen Guo yuchen.guo@ndorms.ox.ac.uk (ORCID) Kim Lopez-Guell kim.lopez@spc.ox.ac.uk (ORCID) contributors: Edward Burn edward.burn@ndorms.ox.ac.uk (ORCID) [contributor] Xintong Li xintong.li@ndorms.ox.ac.uk (ORCID) [contributor]","code":""},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/reference/addDailyDose.html","id":null,"dir":"Reference","previous_headings":"","what":"add daily dose information to a drug_exposure table — addDailyDose","title":"add daily dose information to a drug_exposure table — addDailyDose","text":"add daily dose information drug_exposure table","code":""},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/reference/addDailyDose.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"add daily dose information to a drug_exposure table — addDailyDose","text":"","code":"addDailyDose(   drugExposure,   cdm = attr(drugExposure, \"cdm_reference\"),   ingredientConceptId )"},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/reference/addDailyDose.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"add daily dose information to a drug_exposure table — addDailyDose","text":"drugExposure drugExposure must contain drug_concept_id, quantity, drug_exposure_start_date drug_exposure_end_date columns cdm cdm reference ingredientConceptId ingredientConceptId filter drugs interest","code":""},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/reference/addDailyDose.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"add daily dose information to a drug_exposure table — addDailyDose","text":"input table","code":""},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/reference/addDailyDose.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"add daily dose information to a drug_exposure table — addDailyDose","text":"","code":"# \\donttest{ library(DrugUtilisation) library(dplyr) #>  #> Attaching package: ‘dplyr’ #> The following objects are masked from ‘package:stats’: #>  #>     filter, lag #> The following objects are masked from ‘package:base’: #>  #>     intersect, setdiff, setequal, union  cdm <- mockDrugUtilisation()  cdm[[\"drug_exposure\"]] %>%   filter(drug_concept_id == 2905077) %>%   addDailyDose(ingredientConceptId = 1125315) #> # Source:   table<dbplyr_005> [3 x 10] #> # Database: DuckDB v0.9.1 [unknown@Linux 6.2.0-1014-azure:R 4.3.1/:memory:] #>   drug_exposure_id person_id drug_concept_id drug_exposure_start_date #>              <int>     <int>           <dbl> <date>                   #> 1                3         2         2905077 2022-06-06               #> 2               22         7         2905077 2016-07-08               #> 3               26         8         2905077 2012-02-15               #> # ℹ 6 more variables: drug_exposure_end_date <date>, #> #   drug_type_concept_id <dbl>, quantity <dbl>, daily_dose <dbl>, unit <chr>, #> #   route <chr> # }"},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/reference/addDrugUse.html","id":null,"dir":"Reference","previous_headings":"","what":"Add new columns with drug use related information — addDrugUse","title":"Add new columns with drug use related information — addDrugUse","text":"Add new columns drug use related information","code":""},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/reference/addDrugUse.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Add new columns with drug use related information — addDrugUse","text":"","code":"addDrugUse(   cohort,   cdm = attr(cohort, \"cdm_reference\"),   ingredientConceptId,   conceptSet = NULL,   duration = TRUE,   quantity = TRUE,   dose = TRUE,   gapEra = 30,   eraJoinMode = \"zero\",   overlapMode = \"sum\",   sameIndexMode = \"sum\",   imputeDuration = \"none\",   imputeDailyDose = \"none\",   durationRange = c(1, Inf),   dailyDoseRange = c(0, Inf) )"},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/reference/addDrugUse.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Add new columns with drug use related information — addDrugUse","text":"cohort Cohort cdm cdm cdm_reference created CDMConnector::cdmFromCon ingredientConceptId Ingredient OMOP concept interested study. compulsory input, default value provided. conceptSet List concepts included. NULL descendants ingredient concept id used. duration Whether add duration related columns. quantity Whether add quantity related columns. dose Whether add dose related columns. gapEra Number days two continuous exposures considered era. eraJoinMode two different continuous exposures joined era. four options: \"zero\" exposures joined considering period continuous exposures subject treated daily dose zero. time exposures contributes total exposed time. \"join\" exposures joined considering period continuous exposures subject treated daily dose zero. time exposures contribute total exposed time. \"previous\" exposures joined considering period continuous exposures subject treated daily dose previous subexposure. time exposures contributes total exposed time. \"subsequent\" exposures joined considering period continuous exposures subject treated daily dose subsequent subexposure. time exposures contributes total exposed time. overlapMode overlapping two exposures start day solved inside subexposure. five possible options: \"previous\" considered daily_dose one earliest exposure. \"subsequent\" considered daily_dose one new exposure starts subexposure. \"minimum\" considered daily_dose minimum exposures subexposure. \"maximum\" considered daily_dose maximum exposures subexposure. \"sum\" considered daily_dose sum exposures present subexposure. sameIndexMode overlapping two exposures start day solved inside subexposure. five possible options: \"minimum\" considered daily_dose minimum exposures subexposure. \"maximum\" considered daily_dose maximum exposures subexposure. \"sum\" considered daily_dose sum exposures present subexposure. imputeDuration Whether/duration imputed \"none\", \"median\", \"mean\", \"mode\" number imputeDailyDose Whether/daily_dose imputed \"none\", \"median\", \"mean\", \"mode\" number durationRange Range duration must comprised. numeric vector length two, NAs first value equal smaller second one. required imputeDuration = TRUE. NULL restrictions applied. dailyDoseRange Range daily_dose must comprised. numeric vector length two, NAs first value equal smaller second one. required imputeDailyDose = TRUE. NULL restrictions applied.","code":""},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/reference/addDrugUse.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Add new columns with drug use related information — addDrugUse","text":"cohort added columns.","code":""},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/reference/addDrugUse.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Add new columns with drug use related information — addDrugUse","text":"","code":"# \\donttest{ library(DrugUtilisation) library(CodelistGenerator)  cdm <- mockDrugUtilisation() cdm <- generateDrugUtilisationCohortSet(   cdm, \"dus_cohort\", getDrugIngredientCodes(cdm, \"acetaminophen\") ) cdm[[\"dus_cohort\"]] %>%   addDrugUse(cdm, 1125315) #> # Source:   table<dbplyr_045> [?? x 13] #> # Database: DuckDB v0.9.1 [unknown@Linux 6.2.0-1014-azure:R 4.3.1/:memory:] #>    cohort_definition_id subject_id cohort_start_date cohort_end_date duration #>                   <int>      <dbl> <date>            <date>             <dbl> #>  1                    1          7 2018-05-21        2018-07-20            61 #>  2                    1          2 2022-06-06        2022-06-07             2 #>  3                    1          7 2016-02-01        2017-10-04           612 #>  4                    1          5 2014-07-28        2019-11-20          1942 #>  5                    1          9 2022-09-11        2022-11-09            60 #>  6                    1          1 2021-02-25        2021-03-11            15 #>  7                    1          3 2009-04-18        2009-11-07           204 #>  8                    1          6 1991-01-28        1991-09-17           233 #>  9                    1          4 2021-05-05        2021-12-15           225 #> 10                    1          2 2022-05-24        2022-06-02            10 #> # ℹ more rows #> # ℹ 8 more variables: number_exposures <dbl>, cumulative_quantity <dbl>, #> #   initial_quantity <dbl>, impute_duration_count <dbl>, number_eras <dbl>, #> #   impute_daily_dose_count <dbl>, initial_daily_dose_milligram <dbl>, #> #   cumulative_dose_milligram <dbl> # }"},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/reference/addIndication.html","id":null,"dir":"Reference","previous_headings":"","what":"Get indication for a target cohort — addIndication","title":"Get indication for a target cohort — addIndication","text":"Get indication target cohort","code":""},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/reference/addIndication.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Get indication for a target cohort — addIndication","text":"","code":"addIndication(   x,   cdm = attr(x, \"cdm_reference\"),   indicationCohortName,   indicationGap = 0,   unknownIndicationTable = NULL,   indicationDate = \"cohort_start_date\" )"},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/reference/addIndication.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Get indication for a target cohort — addIndication","text":"x Table cdm cdm cdm reference created using CDMConnector indicationCohortName Name indication cohort table indicationGap Gap event indication unknownIndicationTable Tables search unknown indications indicationDate Date indication","code":""},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/reference/addIndication.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Get indication for a target cohort — addIndication","text":"cohort adding indications","code":""},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/reference/addIndication.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Get indication for a target cohort — addIndication","text":"","code":"# \\donttest{ library(DrugUtilisation) library(CodelistGenerator)  cdm <- mockDrugUtilisation()  indications <- list(\"headache\" = 378253, \"asthma\" = 317009) cdm <- generateConceptCohortSet(   cdm, indications, \"indication_cohorts\" )  acetaminophen <- getDrugIngredientCodes(cdm, \"acetaminophen\") cdm <- generateDrugUtilisationCohortSet(cdm, \"drug_cohort\", acetaminophen)  cdm[[\"drug_cohort\"]] %>%   addIndication(cdm, \"indication_cohorts\", indicationGap = c(0, 30, 365)) #> # Source:   table<dbplyr_079> [?? x 13] #> # Database: DuckDB v0.9.1 [unknown@Linux 6.2.0-1014-azure:R 4.3.1/:memory:] #>    cohort_definition_id subject_id cohort_start_date cohort_end_date #>                   <int>      <dbl> <date>            <date>          #>  1                    1          7 2018-05-21        2018-07-20      #>  2                    1          2 2022-06-06        2022-06-07      #>  3                    1          1 2021-02-25        2021-03-11      #>  4                    1          5 2014-07-28        2019-11-20      #>  5                    1          9 2022-09-11        2022-11-09      #>  6                    1          7 2016-02-01        2017-10-04      #>  7                    1          3 2009-04-18        2009-11-07      #>  8                    1          6 1991-01-28        1991-09-17      #>  9                    1          4 2021-05-05        2021-12-15      #> 10                    1          2 2022-05-24        2022-06-02      #> # ℹ more rows #> # ℹ 9 more variables: indication_gap_0_asthma <dbl>, #> #   indication_gap_0_headache <dbl>, indication_gap_0_none <dbl>, #> #   indication_gap_30_asthma <dbl>, indication_gap_30_headache <dbl>, #> #   indication_gap_30_none <dbl>, indication_gap_365_headache <dbl>, #> #   indication_gap_365_asthma <dbl>, indication_gap_365_none <dbl> # }"},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/reference/addRoute.html","id":null,"dir":"Reference","previous_headings":"","what":"add route column to a table containing drug_exposure information — addRoute","title":"add route column to a table containing drug_exposure information — addRoute","text":"add route column table containing drug_exposure information","code":""},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/reference/addRoute.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"add route column to a table containing drug_exposure information — addRoute","text":"","code":"addRoute(drugTable, cdm = attr(drugTable, \"cdm_reference\"))"},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/reference/addRoute.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"add route column to a table containing drug_exposure information — addRoute","text":"drugTable Table cdm must contain drug_concept_id cdm 'cdm' object created CDMConnector::cdm_from_con(). must must contain 'concept_relationship' table.","code":""},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/reference/addRoute.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"add route column to a table containing drug_exposure information — addRoute","text":"adds route current table","code":""},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/reference/addRoute.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"add route column to a table containing drug_exposure information — addRoute","text":"","code":"# \\donttest{ library(DrugUtilisation) library(dplyr)  cdm <- mockDrugUtilisation()  cdm[[\"drug_exposure\"]] %>%   addRoute() #> # Source:   SQL [?? x 8] #> # Database: DuckDB v0.9.1 [unknown@Linux 6.2.0-1014-azure:R 4.3.1/:memory:] #>    drug_exposure_id person_id drug_concept_id drug_exposure_start_date #>               <int>     <int>           <dbl> <date>                   #>  1               30         9        43135274 2022-09-11               #>  2               26         8         2905077 2012-02-15               #>  3               35        10         1503327 2003-08-02               #>  4               34        10         1516978 2004-12-17               #>  5               33        10         1503328 1992-02-27               #>  6               32         9         1516980 2022-07-21               #>  7               21         7         1125360 2016-02-01               #>  8               36        10         1539463 2003-12-24               #>  9               17         5         1539462 2017-08-29               #> 10               23         7        43135274 2017-07-11               #> # ℹ more rows #> # ℹ 4 more variables: drug_exposure_end_date <date>, #> #   drug_type_concept_id <dbl>, quantity <dbl>, route <chr> # }"},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/reference/dailyDoseCoverage.html","id":null,"dir":"Reference","previous_headings":"","what":"Check coverage of daily dose computation in a sample of the cdm for selected\nconcept sets and ingredient — dailyDoseCoverage","title":"Check coverage of daily dose computation in a sample of the cdm for selected\nconcept sets and ingredient — dailyDoseCoverage","text":"Check coverage daily dose computation sample cdm selected concept sets ingredient","code":""},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/reference/dailyDoseCoverage.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Check coverage of daily dose computation in a sample of the cdm for selected\nconcept sets and ingredient — dailyDoseCoverage","text":"","code":"dailyDoseCoverage(cdm, ingredientConceptId)"},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/reference/dailyDoseCoverage.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Check coverage of daily dose computation in a sample of the cdm for selected\nconcept sets and ingredient — dailyDoseCoverage","text":"cdm cdm reference created using CDMConnector ingredientConceptId Code indicating ingredient interest","code":""},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/reference/dailyDoseCoverage.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Check coverage of daily dose computation in a sample of the cdm for selected\nconcept sets and ingredient — dailyDoseCoverage","text":"function returns information coverage computeDailyDose.R selected ingredients concept sets","code":""},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/reference/dailyDoseCoverage.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Check coverage of daily dose computation in a sample of the cdm for selected\nconcept sets and ingredient — dailyDoseCoverage","text":"","code":"# \\donttest{ library(DrugUtilisation)  cdm <- mockDrugUtilisation()  dailyDoseCoverage(cdm, 1125315) #> Warning: There was 1 warning in `dplyr::summarise()`. #> ℹ In argument: `dplyr::across(...)`. #> ℹ In group 2: `strata_level = \"topical\"`. #> Caused by warning in `base::min()`: #> ! no non-missing arguments to min; returning Inf #> Warning: There was 1 warning in `dplyr::summarise()`. #> ℹ In argument: `dplyr::across(...)`. #> ℹ In group 2: `strata_level = \"topical\"`. #> Caused by warning in `base::max()`: #> ! no non-missing arguments to max; returning -Inf #> Warning: There was 1 warning in `dplyr::summarise()`. #> ℹ In argument: `dplyr::across(...)`. #> ℹ In group 1: `strata_level = \"NA\"`. #> Caused by warning in `base::min()`: #> ! no non-missing arguments to min; returning Inf #> Warning: There was 1 warning in `dplyr::summarise()`. #> ℹ In argument: `dplyr::across(...)`. #> ℹ In group 1: `strata_level = \"NA\"`. #> Caused by warning in `base::max()`: #> ! no non-missing arguments to max; returning -Inf #> Warning: There was 1 warning in `dplyr::summarise()`. #> ℹ In argument: `dplyr::across(...)`. #> ℹ In group 3: `strata_level = \"topical and NA\"`. #> Caused by warning in `base::min()`: #> ! no non-missing arguments to min; returning Inf #> Warning: There was 1 warning in `dplyr::summarise()`. #> ℹ In argument: `dplyr::across(...)`. #> ℹ In group 3: `strata_level = \"topical and NA\"`. #> Caused by warning in `base::max()`: #> ! no non-missing arguments to max; returning -Inf #> # A tibble: 72 × 9 #>    group_name      group_level  strata_name strata_level variable variable_level #>    <chr>           <chr>        <chr>       <chr>        <chr>    <chr>          #>  1 ingredient_name acetaminoph… Overall     Overall      number … NA             #>  2 ingredient_name acetaminoph… Overall     Overall      daily_d… missing        #>  3 ingredient_name acetaminoph… Overall     Overall      daily_d… missing        #>  4 ingredient_name acetaminoph… route       oral         number … NA             #>  5 ingredient_name acetaminoph… route       oral         daily_d… missing        #>  6 ingredient_name acetaminoph… route       oral         daily_d… missing        #>  7 ingredient_name acetaminoph… route       topical      number … NA             #>  8 ingredient_name acetaminoph… route       topical      daily_d… missing        #>  9 ingredient_name acetaminoph… route       topical      daily_d… missing        #> 10 ingredient_name acetaminoph… route       topical - c… number … NA             #> # ℹ 62 more rows #> # ℹ 3 more variables: variable_type <chr>, estimate_type <chr>, estimate <chr> # }"},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/reference/generateDrugUtilisationCohortSet.html","id":null,"dir":"Reference","previous_headings":"","what":"Generates a cohort of the drug use of a certain list of concepts. — generateDrugUtilisationCohortSet","title":"Generates a cohort of the drug use of a certain list of concepts. — generateDrugUtilisationCohortSet","text":"Generates cohort drug use certain list concepts.","code":""},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/reference/generateDrugUtilisationCohortSet.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Generates a cohort of the drug use of a certain list of concepts. — generateDrugUtilisationCohortSet","text":"","code":"generateDrugUtilisationCohortSet(   cdm,   name,   conceptSet,   durationRange = c(1, Inf),   imputeDuration = \"none\",   gapEra = 0,   priorUseWashout = 0,   priorObservation = 0,   cohortDateRange = as.Date(c(NA, NA)),   limit = \"all\" )"},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/reference/generateDrugUtilisationCohortSet.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Generates a cohort of the drug use of a certain list of concepts. — generateDrugUtilisationCohortSet","text":"cdm cdm_reference object. name Name GeneratedCohortSet conceptSet Named list concept sets. durationRange Range duration must comprised. numeric vector length two, NAs first value equal smaller second one. required imputeDuration = TRUE. NULL restrictions applied. imputeDuration Whether/duration imputed \"none\", \"median\", \"mean\", \"mode\", can count gapEra Number days two continuous exposures considered era. priorUseWashout Prior days without exposure. priorObservation Minimum number days prior observation required incident eras considered. NULL required within observation_period. cohortDateRange Range cohort_start_date cohort_end_date limit Choice summarise exposures. two options: \"\" summarise output summary exposed eras individual. individual can contribute multiple times. \"first\" consider first observable era individual fulfills criteria provided previous parameters. case individual can contribute multiple rows.","code":""},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/reference/generateDrugUtilisationCohortSet.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Generates a cohort of the drug use of a certain list of concepts. — generateDrugUtilisationCohortSet","text":"function returns 'cdm' object created tables references object.","code":""},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/reference/generateDrugUtilisationCohortSet.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Generates a cohort of the drug use of a certain list of concepts. — generateDrugUtilisationCohortSet","text":"","code":"# \\donttest{ library(CodelistGenerator) library(CDMConnector) library(DrugUtilisation)  cdm <- mockDrugUtilisation()  druglist <- getDrugIngredientCodes(cdm, c(\"acetaminophen\", \"metformin\"))  cdm <- generateDrugUtilisationCohortSet(   cdm = cdm,   name = \"drug_cohorts\",   conceptSet = druglist,   priorObservation = 365 )  cdm[[\"drug_cohorts\"]] #> # Source:   table<main.drug_cohorts> [7 x 4] #> # Database: DuckDB v0.9.1 [unknown@Linux 6.2.0-1014-azure:R 4.3.1/:memory:] #>   cohort_definition_id subject_id cohort_start_date cohort_end_date #>                  <int>      <dbl> <date>            <date>          #> 1                    1          7 2018-05-21        2018-07-20      #> 2                    2          3 2005-06-02        2008-05-08      #> 3                    1          3 2009-04-18        2009-11-07      #> 4                    1          6 1991-01-28        1991-09-17      #> 5                    2          3 1994-02-27        1995-08-16      #> 6                    1          5 2014-07-28        2019-11-20      #> 7                    2         10 1992-02-27        2004-03-07       cohortSet(cdm[[\"drug_cohorts\"]]) #> # A tibble: 2 × 11 #>   cohort_definition_id cohort_name   limit prior_observation gap_era #>                  <int> <chr>         <chr> <chr>             <chr>   #> 1                    1 acetaminophen all   365               0       #> 2                    2 metformin     all   365               0       #> # ℹ 6 more variables: prior_use_washout <chr>, cohort_date_range_start <chr>, #> #   cohort_date_range_end <chr>, impute_duration <chr>, #> #   duration_range_min <chr>, duration_range_max <chr>  cohortCount(cdm[[\"drug_cohorts\"]]) #> # A tibble: 2 × 3 #>   cohort_definition_id number_records number_subjects #>                  <int>          <dbl>           <dbl> #> 1                    1              4               4 #> 2                    2              3               2  cohortAttrition(cdm[[\"drug_cohorts\"]]) #> # A tibble: 16 × 7 #>    cohort_definition_id number_records number_subjects reason_id reason          #>                   <int>          <dbl>           <dbl>     <dbl> <chr>           #>  1                    2              8               5         1 \"Qualifying in… #>  2                    2              8               5         2 \"Duration impu… #>  3                    2              7               5         3 \"Join eras\"     #>  4                    2              7               5         4 \"prior use wah… #>  5                    2              3               2         5 \"at least 365 … #>  6                    2              3               2         6 \"cohort_start_… #>  7                    2              3               2         7 \"cohort_end_da… #>  8                    2              3               2         8 \"limit: all ap… #>  9                    1             13               9         1 \"Qualifying in… #> 10                    1             13               9         2 \"Duration impu… #> 11                    1             11               9         3 \"Join eras\"     #> 12                    1             11               9         4 \"prior use wah… #> 13                    1              4               4         5 \"at least 365 … #> 14                    1              4               4         6 \"cohort_start_… #> 15                    1              4               4         7 \"cohort_end_da… #> 16                    1              4               4         8 \"limit: all ap… #> # ℹ 2 more variables: excluded_records <dbl>, excluded_subjects <dbl> # }"},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/reference/indicationToStrata.html","id":null,"dir":"Reference","previous_headings":"","what":"Create new variables summarising the data of indication that can be used as\nstratification columns — indicationToStrata","title":"Create new variables summarising the data of indication that can be used as\nstratification columns — indicationToStrata","text":"Create new variables summarising data indication can used stratification columns","code":""},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/reference/indicationToStrata.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Create new variables summarising the data of indication that can be used as\nstratification columns — indicationToStrata","text":"","code":"indicationToStrata(   cohort,   indicationVariables = indicationColumns(cohort),   keep = FALSE )"},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/reference/indicationToStrata.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Create new variables summarising the data of indication that can be used as\nstratification columns — indicationToStrata","text":"cohort cohort cdm indicationVariables Indication variables want join keep Whether keep prior indication variables ","code":""},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/reference/indicationToStrata.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Create new variables summarising the data of indication that can be used as\nstratification columns — indicationToStrata","text":"description cohort new variable","code":""},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/reference/indicationToStrata.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Create new variables summarising the data of indication that can be used as\nstratification columns — indicationToStrata","text":"","code":"# \\donttest{ library(DrugUtilisation)  cdm <- mockDrugUtilisation() cdm[[\"cohort1\"]] <- cdm[[\"cohort1\"]] %>%   addIndication(cdm, \"cohort2\") %>%   indicationToStrata() # }"},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/reference/mockDrugUtilisation.html","id":null,"dir":"Reference","previous_headings":"","what":"It creates a mock database for testing drugutilisation package — mockDrugUtilisation","title":"It creates a mock database for testing drugutilisation package — mockDrugUtilisation","text":"creates mock database testing drugutilisation package","code":""},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/reference/mockDrugUtilisation.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"It creates a mock database for testing drugutilisation package — mockDrugUtilisation","text":"","code":"mockDrugUtilisation(   connectionDetails = list(con = DBI::dbConnect(duckdb::duckdb(), \":memory:\"),     writeSchema = \"main\", cdmPrefix = NULL, writePrefix = NULL),   numberIndividuals = 10,   seed = 1,   concept = NULL,   concept_ancestor = NULL,   drug_strength = NULL,   person = NULL,   observation_period = NULL,   drug_exposure = NULL,   condition_occurrence = NULL,   observation = NULL,   concept_relationship = NULL,   extraTables = list(),   ... )"},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/reference/mockDrugUtilisation.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"It creates a mock database for testing drugutilisation package — mockDrugUtilisation","text":"connectionDetails Details connection numberIndividuals Number individuals mock cdm seed Seed random numbers concept concept tibble, NULL mock one created concept_ancestor concept_ancestor tibble, NULL mock one created drug_strength drug_strength tibble, NULL mock one created person person tibble, NULL mock one created observation_period observation_period tibble, NULL mock one created drug_exposure drug_exposure tibble, NULL mock one created condition_occurrence condition_occurrence tibble, NULL mock one created observation observation tibble, NULL mock one created concept_relationship concept_relationship tibble, NULL mock one created. extraTables Extra tibbles instantiated cohorts cdm tables ... Cohorts can added cdm reference, cohort1 cohort2 created provided","code":""},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/reference/mockDrugUtilisation.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"It creates a mock database for testing drugutilisation package — mockDrugUtilisation","text":"cdm reference mock tables","code":""},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/reference/mockDrugUtilisation.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"It creates a mock database for testing drugutilisation package — mockDrugUtilisation","text":"","code":"# \\donttest{ library(DrugUtilisation)  cdm <- mockDrugUtilisation()  cdm #> # OMOP CDM reference (tbl_duckdb_connection) #>  #> Tables: person, observation_period, visit_occurrence, condition_occurrence, drug_exposure, observation, concept, concept_relationship, concept_ancestor, drug_strength, cohort1, cohort2 # }"},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/reference/patternTable.html","id":null,"dir":"Reference","previous_headings":"","what":"Function to create a tibble with the patterns from current drug strength table — patternTable","title":"Function to create a tibble with the patterns from current drug strength table — patternTable","text":"Function create tibble patterns current drug strength table","code":""},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/reference/patternTable.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Function to create a tibble with the patterns from current drug strength table — patternTable","text":"","code":"patternTable(cdm)"},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/reference/patternTable.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Function to create a tibble with the patterns from current drug strength table — patternTable","text":"cdm 'cdm' object created CDMConnector::cdm_from_con(). must must contain 'drug_strength' 'concept' tables.","code":""},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/reference/patternTable.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Function to create a tibble with the patterns from current drug strength table — patternTable","text":"function creates tibble different patterns found table, plus column potentially valid invalid combinations.","code":""},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/reference/patternTable.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Function to create a tibble with the patterns from current drug strength table — patternTable","text":"","code":"# \\donttest{ library(DrugUtilisation)  cdm <- mockDrugUtilisation()  patternTable(cdm) #> # A tibble: 8 × 13 #>   pattern_file_id pattern_id formula_id validity                number_concepts #>             <dbl>      <dbl>      <dbl> <chr>                             <dbl> #> 1               4          4          2 pattern with formula                  6 #> 2               4          4         NA pattern wrong route                   1 #> 3              15         15         NA pattern wrong route                   1 #> 4              52         NA         NA pattern with no formula               3 #> 5              57         NA         NA pattern with no formula               1 #> 6             115         NA         NA pattern with no formula               1 #> 7             120         NA         NA pattern with no formula               1 #> 8              NA         NA         NA no pattern                           NA #> # ℹ 8 more variables: number_ingredients <dbl>, number_records <dbl>, #> #   amount_numeric <dbl>, amount_unit_concept_id <dbl>, #> #   numerator_numeric <dbl>, numerator_unit_concept_id <dbl>, #> #   denominator_numeric <dbl>, denominator_unit_concept_id <dbl> # }"},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/reference/pipe.html","id":null,"dir":"Reference","previous_headings":"","what":"Pipe operator — %>%","title":"Pipe operator — %>%","text":"See magrittr::%>% details.","code":""},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/reference/pipe.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Pipe operator — %>%","text":"","code":"lhs %>% rhs"},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/reference/pipe.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Pipe operator — %>%","text":"lhs value magrittr placeholder. rhs function call using magrittr semantics.","code":""},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/reference/pipe.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Pipe operator — %>%","text":"result calling rhs(lhs).","code":""},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/reference/readConceptList.html","id":null,"dir":"Reference","previous_headings":"","what":"Get concept ids from a provided path to json files — readConceptList","title":"Get concept ids from a provided path to json files — readConceptList","text":"Get concept ids provided path json files","code":""},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/reference/readConceptList.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Get concept ids from a provided path to json files — readConceptList","text":"","code":"readConceptList(path, cdm)"},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/reference/readConceptList.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Get concept ids from a provided path to json files — readConceptList","text":"path path file folder containing jsons read cdm cdm reference created CDMConnector","code":""},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/reference/readConceptList.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Get concept ids from a provided path to json files — readConceptList","text":"list concept_ids respective concept_ids interest","code":""},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/reference/readConceptList.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Get concept ids from a provided path to json files — readConceptList","text":"","code":"# \\donttest{ library(DrugUtilisation)  cdm <- mockDrugUtilisation()  codelist <- readConceptList(   path = system.file(\"concepts\",package=\"DrugUtilisation\"), cdm = cdm ) # }"},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/reference/reexports.html","id":null,"dir":"Reference","previous_headings":"","what":"Objects exported from other packages — reexports","title":"Objects exported from other packages — reexports","text":"objects imported packages. Follow links see documentation. CDMConnector generateConceptCohortSet PatientProfiles summariseCharacteristics, summariseLargeScaleCharacteristics","code":""},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/reference/reportGenerator.html","id":null,"dir":"Reference","previous_headings":"","what":"Information that connects DrugUtilisation with ReportGenerator — reportGenerator","title":"Information that connects DrugUtilisation with ReportGenerator — reportGenerator","text":"Information connects DrugUtilisation ReportGenerator","code":""},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/reference/reportGenerator.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Information that connects DrugUtilisation with ReportGenerator — reportGenerator","text":"","code":"reportGenerator"},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/reference/reportGenerator.html","id":"format","dir":"Reference","previous_headings":"","what":"Format","title":"Information that connects DrugUtilisation with ReportGenerator — reportGenerator","text":"List exported elements","code":""},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/reference/reportGenerator.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Information that connects DrugUtilisation with ReportGenerator — reportGenerator","text":"","code":"reportGenerator #> $indication #> $indication$columnNames #>  [1] \"group_name\"     \"group_level\"    \"strata_name\"    \"strata_level\"   #>  [5] \"variable\"       \"variable_type\"  \"variable_level\" \"estimate_type\"  #>  [9] \"estimate\"       \"cdm_name\"       \"generated_by\"   #>  #> $indication$functions #> [1] \"DrugUtilisation::displayIndication\" #>  #>"},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/reference/stratifyByUnit.html","id":null,"dir":"Reference","previous_headings":"","what":"Function to stratify a conceptSet by unit — stratifyByUnit","title":"Function to stratify a conceptSet by unit — stratifyByUnit","text":"Function stratify conceptSet unit","code":""},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/reference/stratifyByUnit.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Function to stratify a conceptSet by unit — stratifyByUnit","text":"","code":"stratifyByUnit(conceptSet, cdm, ingredientConceptId)"},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/reference/stratifyByUnit.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Function to stratify a conceptSet by unit — stratifyByUnit","text":"conceptSet List concept sets cdm cdm reference ingredientConceptId ConceptId refers ingredient","code":""},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/reference/stratifyByUnit.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Function to stratify a conceptSet by unit — stratifyByUnit","text":"conceptSet stratified unit","code":""},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/reference/stratifyByUnit.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Function to stratify a conceptSet by unit — stratifyByUnit","text":"","code":"# \\donttest{ library(DrugUtilisation) library(CodelistGenerator)  cdm <- mockDrugUtilisation()  codelist <- getDrugIngredientCodes(cdm, \"acetaminophen\")  codelistStratified <- stratifyByUnit(codelist, cdm, 1125315)  codelistStratified #> $`acetaminophen unit: milligram` #> [1]  1125360 43135274 #>  # }"},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/reference/summariseCharacteristicsFromCodelist.html","id":null,"dir":"Reference","previous_headings":"","what":"Summarise a cohort from multipl codelist and windows — summariseCharacteristicsFromCodelist","title":"Summarise a cohort from multipl codelist and windows — summariseCharacteristicsFromCodelist","text":"Summarise cohort multipl codelist windows","code":""},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/reference/summariseCharacteristicsFromCodelist.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Summarise a cohort from multipl codelist and windows — summariseCharacteristicsFromCodelist","text":"","code":"summariseCharacteristicsFromCodelist(   cohort,   cdm,   conceptSet,   strata = list(),   window = list(c(-Inf, -366), c(-365, -31), c(-30, -1), c(0, 0), c(1, 30), c(31, 365),     c(366, Inf)),   overlap = TRUE,   minCellCount = 5 )"},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/reference/summariseCharacteristicsFromCodelist.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Summarise a cohort from multipl codelist and windows — summariseCharacteristicsFromCodelist","text":"cohort Cohort summarise cdm cdm_reference conceptSet list concept sets strata Stratification list window Windows characterize overlap Whether consider episodes (overlap = TRUE) incident (overlap = FALSE) minCellCount Minimum cell counts","code":""},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/reference/summariseCharacteristicsFromCodelist.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Summarise a cohort from multipl codelist and windows — summariseCharacteristicsFromCodelist","text":"SummarisedResults object contains characterization","code":""},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/reference/summariseCharacteristicsFromCodelist.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Summarise a cohort from multipl codelist and windows — summariseCharacteristicsFromCodelist","text":"","code":"# \\donttest{ library(DrugUtilisation) library(CodelistGenerator)  cdm <- mockDrugUtilisation()  conceptSet <- list(   \"acetaminophen\" = c(1125315, 1125360, 2905077, 43135274),   \"group A\" = c(     3665501, 378253, 317009, 761948, 1539403, 1503327, 1516980, 4141052,     4313306   ) ) summariseCharacteristicsFromCodelist(   cdm[[\"cohort1\"]], cdm, conceptSet,   window = list(c(-365, -1), c(0, 0), c(1, 365)) ) #> → measurement table not present in the cdm #> → procedure_occurrence table not present in the cdm #> # A tibble: 24 × 12 #>    group_name  group_level strata_name strata_level window_name variable      #>    <chr>       <chr>       <chr>       <chr>        <chr>       <chr>         #>  1 Cohort name cohort_3    Overall     Overall      -365 to -1  group A       #>  2 Cohort name cohort_3    Overall     Overall      -365 to -1  acetaminophen #>  3 Cohort name cohort_2    Overall     Overall      -365 to -1  group A       #>  4 Cohort name cohort_2    Overall     Overall      -365 to -1  acetaminophen #>  5 Cohort name cohort_3    Overall     Overall      -365 to -1  denominator   #>  6 Cohort name cohort_2    Overall     Overall      -365 to -1  denominator   #>  7 Cohort name cohort_1    Overall     Overall      -365 to -1  group A       #>  8 Cohort name cohort_1    Overall     Overall      -365 to -1  acetaminophen #>  9 Cohort name cohort_1    Overall     Overall      -365 to -1  denominator   #> 10 Cohort name cohort_3    Overall     Overall      0 to 0      acetaminophen #> # ℹ 14 more rows #> # ℹ 6 more variables: variable_type <chr>, variable_level <chr>, #> #   estimate_type <chr>, estimate <chr>, cdm_name <chr>, result_type <chr> # }"},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/reference/summariseDrugUse.html","id":null,"dir":"Reference","previous_headings":"","what":"This function is used to summarise the dose table over multiple cohorts. — summariseDrugUse","title":"This function is used to summarise the dose table over multiple cohorts. — summariseDrugUse","text":"function used summarise dose table multiple cohorts.","code":""},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/reference/summariseDrugUse.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"This function is used to summarise the dose table over multiple cohorts. — summariseDrugUse","text":"","code":"summariseDrugUse(   cohort,   cdm = attr(cohort, \"cdm_reference\"),   strata = list(),   drugUseEstimates = c(\"min\", \"q05\", \"q25\", \"median\", \"q75\", \"q95\", \"max\", \"missing\"),   minCellCount = 5 )"},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/reference/summariseDrugUse.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"This function is used to summarise the dose table over multiple cohorts. — summariseDrugUse","text":"cohort Cohort drug use variables strata cdm cdm_reference generated CDMConnector strata Stratification list drugUseEstimates Estimates want columns minCellCount number counts supressed","code":""},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/reference/summariseDrugUse.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"This function is used to summarise the dose table over multiple cohorts. — summariseDrugUse","text":"summary drug use stratified cohort_name strata_name","code":""},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/reference/summariseDrugUse.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"This function is used to summarise the dose table over multiple cohorts. — summariseDrugUse","text":"","code":"# \\donttest{ library(DrugUtilisation) library(PatientProfiles) library(CodelistGenerator)  cdm <- mockDrugUtilisation() cdm <- generateDrugUtilisationCohortSet(   cdm, \"dus_cohort\", getDrugIngredientCodes(cdm, \"acetaminophen\") ) cdm[[\"dus_cohort\"]] <- cdm[[\"dus_cohort\"]] %>%   addDrugUse(cdm, 1125315) result <- summariseDrugUse(cdm[[\"dus_cohort\"]], cdm) print(result) #> # A tibble: 83 × 11 #>    group_name  group_level   strata_name strata_level variable    variable_level #>    <chr>       <chr>         <chr>       <chr>        <chr>       <chr>          #>  1 cohort_name acetaminophen Overall     Overall      number sub… NA             #>  2 cohort_name acetaminophen Overall     Overall      number rec… NA             #>  3 cohort_name acetaminophen Overall     Overall      duration    NA             #>  4 cohort_name acetaminophen Overall     Overall      duration    NA             #>  5 cohort_name acetaminophen Overall     Overall      duration    NA             #>  6 cohort_name acetaminophen Overall     Overall      duration    NA             #>  7 cohort_name acetaminophen Overall     Overall      duration    NA             #>  8 cohort_name acetaminophen Overall     Overall      duration    NA             #>  9 cohort_name acetaminophen Overall     Overall      duration    NA             #> 10 cohort_name acetaminophen Overall     Overall      duration    missing        #> # ℹ 73 more rows #> # ℹ 5 more variables: variable_type <chr>, estimate_type <chr>, estimate <chr>, #> #   cdm_name <chr>, result_type <chr>  cdm[[\"dus_cohort\"]] <- cdm[[\"dus_cohort\"]] %>%   addSex(cdm) %>%   addAge(cdm, ageGroup = list(\"<40\" = c(0, 30), \">40\" = c(40, 150)))  summariseDrugUse(   cdm[[\"dus_cohort\"]], cdm, strata = list(    \"age_group\" = \"age_group\", \"sex\" = \"sex\",    \"age_group and sex\" = c(\"age_group\", \"sex\")   ) ) #> # A tibble: 830 × 11 #>    group_name  group_level   strata_name strata_level variable    variable_level #>    <chr>       <chr>         <chr>       <chr>        <chr>       <chr>          #>  1 cohort_name acetaminophen Overall     Overall      number sub… NA             #>  2 cohort_name acetaminophen Overall     Overall      number rec… NA             #>  3 cohort_name acetaminophen Overall     Overall      duration    NA             #>  4 cohort_name acetaminophen Overall     Overall      duration    NA             #>  5 cohort_name acetaminophen Overall     Overall      duration    NA             #>  6 cohort_name acetaminophen Overall     Overall      duration    NA             #>  7 cohort_name acetaminophen Overall     Overall      duration    NA             #>  8 cohort_name acetaminophen Overall     Overall      duration    NA             #>  9 cohort_name acetaminophen Overall     Overall      duration    NA             #> 10 cohort_name acetaminophen Overall     Overall      duration    missing        #> # ℹ 820 more rows #> # ℹ 5 more variables: variable_type <chr>, estimate_type <chr>, estimate <chr>, #> #   cdm_name <chr>, result_type <chr> # }"},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/reference/summariseIndication.html","id":null,"dir":"Reference","previous_headings":"","what":"This function is used to summarise the indication table over multiple\ncohorts. — summariseIndication","title":"This function is used to summarise the indication table over multiple\ncohorts. — summariseIndication","text":"function used summarise indication table multiple cohorts.","code":""},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/reference/summariseIndication.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"This function is used to summarise the indication table over multiple\ncohorts. — summariseIndication","text":"","code":"summariseIndication(   cohort,   cdm = attr(cohort, \"cdm_reference\"),   strata = list(),   minCellCount = 5 )"},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/reference/summariseIndication.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"This function is used to summarise the indication table over multiple\ncohorts. — summariseIndication","text":"cohort Cohort indications strata cdm cdm_reference created CDMConnector strata Stratification list minCellCount Minimum counts group can . Cohorts less counts value obscured.","code":""},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/reference/summariseIndication.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"This function is used to summarise the indication table over multiple\ncohorts. — summariseIndication","text":"Tibble 4 columns: cohort_definition_id, variable, estimate value. one row cohort, variable cohort combination.","code":""},{"path":"https://darwin-eu-dev.github.io/DrugUtilisation/reference/summariseIndication.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"This function is used to summarise the indication table over multiple\ncohorts. — summariseIndication","text":"","code":"# \\donttest{ library(DrugUtilisation) library(PatientProfiles) library(CodelistGenerator)  cdm <- mockDrugUtilisation() indications <- list(\"headache\" = 378253, \"asthma\" = 317009) cdm <- generateConceptCohortSet(cdm, indications, \"indication_cohorts\") acetaminophen <- getDrugIngredientCodes(cdm, \"acetaminophen\") cdm <- generateDrugUtilisationCohortSet(cdm, \"drug_cohort\", acetaminophen) cdm[[\"drug_cohort\"]] <- cdm[[\"drug_cohort\"]] %>%   addIndication(cdm, \"indication_cohorts\", indicationGap = c(0, 30, 365))  summariseIndication(cdm[[\"drug_cohort\"]], cdm) #> # A tibble: 20 × 11 #>    group_name  group_level   strata_name strata_level variable    variable_level #>    <chr>       <chr>         <chr>       <chr>        <chr>       <chr>          #>  1 cohort_name acetaminophen Overall     Overall      number sub… NA             #>  2 cohort_name acetaminophen Overall     Overall      number rec… NA             #>  3 cohort_name acetaminophen Overall     Overall      Indication… Headache       #>  4 cohort_name acetaminophen Overall     Overall      Indication… Headache       #>  5 cohort_name acetaminophen Overall     Overall      Indication… Asthma         #>  6 cohort_name acetaminophen Overall     Overall      Indication… Asthma         #>  7 cohort_name acetaminophen Overall     Overall      Indication… None           #>  8 cohort_name acetaminophen Overall     Overall      Indication… None           #>  9 cohort_name acetaminophen Overall     Overall      Indication… Headache       #> 10 cohort_name acetaminophen Overall     Overall      Indication… Headache       #> 11 cohort_name acetaminophen Overall     Overall      Indication… Asthma         #> 12 cohort_name acetaminophen Overall     Overall      Indication… Asthma         #> 13 cohort_name acetaminophen Overall     Overall      Indication… None           #> 14 cohort_name acetaminophen Overall     Overall      Indication… None           #> 15 cohort_name acetaminophen Overall     Overall      Indication… Asthma         #> 16 cohort_name acetaminophen Overall     Overall      Indication… Asthma         #> 17 cohort_name acetaminophen Overall     Overall      Indication… Headache       #> 18 cohort_name acetaminophen Overall     Overall      Indication… Headache       #> 19 cohort_name acetaminophen Overall     Overall      Indication… None           #> 20 cohort_name acetaminophen Overall     Overall      Indication… None           #> # ℹ 5 more variables: variable_type <chr>, estimate_type <chr>, estimate <chr>, #> #   cdm_name <chr>, result_type <chr>  cdm[[\"drug_cohort\"]] <- cdm[[\"drug_cohort\"]] %>%   addAge(cdm, ageGroup = list(\"<40\" = c(0, 39), \">=40\" = c(40, 150))) %>%   addSex(cdm)  summariseIndication(   cdm[[\"drug_cohort\"]], cdm, strata = list(     \"age_group\" = \"age_group\", \"age_group and sex\" = c(\"age_group\", \"sex\")   ) ) #> # A tibble: 120 × 11 #>    group_name  group_level   strata_name strata_level variable    variable_level #>    <chr>       <chr>         <chr>       <chr>        <chr>       <chr>          #>  1 cohort_name acetaminophen Overall     Overall      number sub… NA             #>  2 cohort_name acetaminophen Overall     Overall      number rec… NA             #>  3 cohort_name acetaminophen Overall     Overall      Indication… Headache       #>  4 cohort_name acetaminophen Overall     Overall      Indication… Headache       #>  5 cohort_name acetaminophen Overall     Overall      Indication… Asthma         #>  6 cohort_name acetaminophen Overall     Overall      Indication… Asthma         #>  7 cohort_name acetaminophen Overall     Overall      Indication… None           #>  8 cohort_name acetaminophen Overall     Overall      Indication… None           #>  9 cohort_name acetaminophen Overall     Overall      Indication… Headache       #> 10 cohort_name acetaminophen Overall     Overall      Indication… Headache       #> # ℹ 110 more rows #> # ℹ 5 more variables: variable_type <chr>, estimate_type <chr>, estimate <chr>, #> #   cdm_name <chr>, result_type <chr> # }"}]
