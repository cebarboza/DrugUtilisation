<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="DrugUtilisation">
<title>Use addDrugUse and summariseDrugUse to explore a drug • DrugUtilisation</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Use addDrugUse and summariseDrugUse to explore a drug">
<meta property="og:description" content="DrugUtilisation">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">DrugUtilisation</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.4.1</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/addDrugUse.html">Use addDrugUse and summariseDrugUse to explore a drug</a>
    <a class="dropdown-item" href="../articles/addIndications-example.html">Add indications to Drug Utilisation Cohort</a>
    <a class="dropdown-item" href="../articles/benchmarkDusCapr.html">DrugUtilisation vs CapR</a>
    <a class="dropdown-item" href="../articles/introCreateCohort.html">Use DrugUtilisation to create cohort</a>
    <a class="dropdown-item" href="../articles/routePatternDose.html">Guide on using DrugUtilisataion package to compute drug use related information</a>
  </div>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav"></ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Use addDrugUse and summariseDrugUse to explore a drug</h1>
                        <h4 data-toc-skip class="author">Martí Català,
Mike Du, Yuchen Guo, Kim López-Güell, and Edward Burn</h4>
            
            <h4 data-toc-skip class="date">2023-12-08</h4>
      
      
      <div class="d-none name"><code>addDrugUse.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<p>In this vignette, we introduce the use of the addDrugUse and
summarizeDrugUse functions. These functions add new columns with
drug-related information and summarize the results.</p>
<div class="section level3">
<h3 id="create-mock-data-first">Create mock data first<a class="anchor" aria-label="anchor" href="#create-mock-data-first"></a>
</h3>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://darwin-eu-dev.github.io/DrugUtilisation/">DrugUtilisation</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://darwin-eu.github.io/CodelistGenerator/" class="external-link">CodelistGenerator</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://darwin-eu.github.io/CDMConnector/" class="external-link">CDMConnector</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://darwin-eu-dev.github.io/PatientProfiles/" class="external-link">PatientProfiles</a></span><span class="op">)</span></span>
<span></span>
<span><span class="va">cdm</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/mockDrugUtilisation.html">mockDrugUtilisation</a></span><span class="op">(</span>numberIndividual  <span class="op">=</span> <span class="fl">200</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="create-a-drug-utilisation-cohort">Create a drug utilisation cohort<a class="anchor" aria-label="anchor" href="#create-a-drug-utilisation-cohort"></a>
</h3>
<p>We will use Acetaminophen as our example drug to construct our drug
utilisation cohort. To begin, we will employ the package
“codeListGenetator” to generate a concept list associated with
Acetaminophen.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">conceptList</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://darwin-eu.github.io/CodelistGenerator/reference/getDrugIngredientCodes.html" class="external-link">getDrugIngredientCodes</a></span><span class="op">(</span><span class="va">cdm</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"acetaminophen"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">conceptList</span></span>
<span><span class="co">#&gt; $acetaminophen</span></span>
<span><span class="co">#&gt; [1]  1125315  1125360  2905077 43135274</span></span></code></pre></div>
<p>Next, we create a drug utilisation cohort by using the conceptList
with the “generateDrugUtilisationCohortSet” function. For a better
understanding of the arguments and functionalities of
“generateDrugUtilisationCohortSet”, please refer to the “Use
DrugUtilisation to create a cohort” vignette.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">cdm</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/generateDrugUtilisationCohortSet.html">generateDrugUtilisationCohortSet</a></span><span class="op">(</span></span>
<span>  cdm  <span class="op">=</span> <span class="va">cdm</span>,</span>
<span>  name <span class="op">=</span> <span class="st">"acetaminophen_users"</span>,</span>
<span>  conceptSet <span class="op">=</span> <span class="va">conceptList</span></span>
<span><span class="op">)</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="adddruguse">addDrugUse<a class="anchor" aria-label="anchor" href="#adddruguse"></a>
</h2>
<p>addDrugUse function is used to add columns related to the drug use.
You must provide a cohort and a reference ingredient. See an example
below.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/addDrugUse.html">addDrugUse</a></span><span class="op">(</span></span>
<span>  cohort <span class="op">=</span> <span class="va">cdm</span><span class="op">[[</span><span class="st">"acetaminophen_users"</span><span class="op">]</span><span class="op">]</span>,</span>
<span>  cdm    <span class="op">=</span> <span class="va">cdm</span>,</span>
<span>  ingredientConceptId <span class="op">=</span> <span class="fl">1125315</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># Source:   table&lt;dbplyr_034&gt; [?? x 13]</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># Database: DuckDB v0.9.2 [unknown@Linux 6.2.0-1018-azure:R 4.3.2/:memory:]</span></span></span>
<span><span class="co">#&gt;    cohort_definition_id subject_id cohort_start_date cohort_end_date duration</span></span>
<span><span class="co">#&gt;                   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>            <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>             <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span>                    1          6 2020-05-19        2020-11-23           189</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span>                    1         73 2021-04-16        2021-04-30            15</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span>                    1        189 2020-03-19        2020-12-07           264</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span>                    1        194 2004-09-18        2007-02-08           874</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span>                    1          2 2013-01-20        2013-06-16           148</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span>                    1        103 2004-03-29        2008-10-09          <span style="text-decoration: underline;">1</span>656</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span>                    1          1 2021-10-26        2022-01-22            89</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span>                    1        161 2021-05-21        2021-07-17            58</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span>                    1        188 2014-09-24        2017-04-04           924</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span>                    1         52 2014-07-27        2015-05-02           280</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ more rows</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 8 more variables: number_exposures &lt;dbl&gt;, cumulative_quantity &lt;dbl&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   initial_quantity &lt;dbl&gt;, impute_duration_percentage &lt;dbl&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   number_eras &lt;dbl&gt;, impute_daily_dose_percentage &lt;dbl&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   initial_daily_dose_milligram &lt;dbl&gt;, cumulative_dose_milligram &lt;dbl&gt;</span></span></span></code></pre></div>
<p>As seen, the following columns have been added:</p>
<p><strong>1. number_exposures:</strong> Number of exposures during the
cohort observation.</p>
<p><strong>2. cumulative_quantity:</strong> Cumulative sum of the column
<em>quantity</em> of <em>drug_exposure</em> table during the drug
exposure period.</p>
<p><strong>3. initial_quantity:</strong> Quantity at
<em>drug_exposure_start_date</em>.</p>
<p><strong>4. impute_duration_percentage:</strong> If a drug exposure
record does not have the duration of the exposure, or falls outside a
specified range (see later), records will be imputed. This column shows
the number of records that have been imputed or that would be
imputed.</p>
<p><strong>5. number_eras:</strong> Number of eras within each drug
exposure period.</p>
<p><strong>6. impute_daily_dose_percentage:</strong> If a drug exposure
record does not have the daily dose of the exposure, or falls outside a
specified range (see later), records will be imputed. This column shows
the number of records that have been imputed or that would be
imputed.</p>
<p><strong>7. initial_daily_dose_milligram:</strong> dose at
<em>drug_exposure_start_date</em>.</p>
<p><strong>8. cumulative_dose_milligram:</strong> cumulative sum of the
column <em>dose</em> of <em>drug_exposure</em> table during the drug
exposure period,</p>
<p>You can choose which columns will be added by defining the
<em>duration</em>, <em>quantity</em>, and <em>dose</em> inputs as either
TRUE or FALSE.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/addDrugUse.html">addDrugUse</a></span><span class="op">(</span></span>
<span>  cohort <span class="op">=</span> <span class="va">cdm</span><span class="op">[[</span><span class="st">"acetaminophen_users"</span><span class="op">]</span><span class="op">]</span>,</span>
<span>  cdm    <span class="op">=</span> <span class="va">cdm</span>,</span>
<span>  ingredientConceptId <span class="op">=</span> <span class="fl">1125315</span>,</span>
<span>  duration <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  quantity <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  dose <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># Source:   table&lt;dbplyr_041&gt; [?? x 8]</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># Database: DuckDB v0.9.2 [unknown@Linux 6.2.0-1018-azure:R 4.3.2/:memory:]</span></span></span>
<span><span class="co">#&gt;    cohort_definition_id subject_id cohort_start_date cohort_end_date duration</span></span>
<span><span class="co">#&gt;                   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>            <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>             <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span>                    1          6 2020-05-19        2020-11-23           189</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span>                    1         73 2021-04-16        2021-04-30            15</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span>                    1        189 2020-03-19        2020-12-07           264</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span>                    1        194 2004-09-18        2007-02-08           874</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span>                    1          2 2013-01-20        2013-06-16           148</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span>                    1        103 2004-03-29        2008-10-09          <span style="text-decoration: underline;">1</span>656</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span>                    1          1 2021-10-26        2022-01-22            89</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span>                    1        161 2021-05-21        2021-07-17            58</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span>                    1         52 2014-07-27        2015-05-02           280</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span>                    1         42 1999-10-19        2002-02-23           859</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ more rows</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 3 more variables: number_exposures &lt;dbl&gt;, impute_duration_percentage &lt;dbl&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   number_eras &lt;dbl&gt;</span></span></span></code></pre></div>
<p>If <em>duration</em>, <em>quantity</em>, and <em>dose</em> are FALSE,
only <em>number_exposures</em> and <em>number_eras</em> will be
added.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/addDrugUse.html">addDrugUse</a></span><span class="op">(</span></span>
<span>  cohort <span class="op">=</span> <span class="va">cdm</span><span class="op">[[</span><span class="st">"acetaminophen_users"</span><span class="op">]</span><span class="op">]</span>,</span>
<span>  cdm    <span class="op">=</span> <span class="va">cdm</span>,</span>
<span>  ingredientConceptId <span class="op">=</span> <span class="fl">1125315</span>,</span>
<span>  gapEra <span class="op">=</span> <span class="fl">20</span>,</span>
<span>  eraJoinMode <span class="op">=</span> <span class="st">"zero"</span>,</span>
<span>  duration <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  quantity <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  dose <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># Source:   table&lt;dbplyr_048&gt; [?? x 6]</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># Database: DuckDB v0.9.2 [unknown@Linux 6.2.0-1018-azure:R 4.3.2/:memory:]</span></span></span>
<span><span class="co">#&gt;    cohort_definition_id subject_id cohort_start_date cohort_end_date</span></span>
<span><span class="co">#&gt;                   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>            <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>         </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span>                    1          6 2020-05-19        2020-11-23     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span>                    1         73 2021-04-16        2021-04-30     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span>                    1        189 2020-03-19        2020-12-07     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span>                    1        194 2004-09-18        2007-02-08     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span>                    1          2 2013-01-20        2013-06-16     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span>                    1        103 2004-03-29        2008-10-09     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span>                    1          1 2021-10-26        2022-01-22     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span>                    1        161 2021-05-21        2021-07-17     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span>                    1         52 2014-07-27        2015-05-02     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span>                    1         42 1999-10-19        2002-02-23     </span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ more rows</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 2 more variables: number_exposures &lt;dbl&gt;, number_eras &lt;dbl&gt;</span></span></span></code></pre></div>
<div class="section level3">
<h3 id="gapera">gapEra<a class="anchor" aria-label="anchor" href="#gapera"></a>
</h3>
<p><em>gapEra</em> parameter defines the number of days between two
continuous drug exposures. Let’s see an example.</p>
<p>First, let’s create a cohort with <em>gapEra</em> = 0. For a better
understanding, let’s observe only <em>subject_id</em> = 56.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">cdm</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/generateDrugUtilisationCohortSet.html">generateDrugUtilisationCohortSet</a></span><span class="op">(</span></span>
<span>  cdm <span class="op">=</span> <span class="va">cdm</span>,</span>
<span>  name <span class="op">=</span> <span class="st">"acetaminophen_example1"</span>,</span>
<span>  conceptSet <span class="op">=</span> <span class="va">conceptList</span>,</span>
<span>  gapEra <span class="op">=</span> <span class="fl">0</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">cdm</span><span class="op">$</span><span class="va">drug_exposure</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">drug_concept_id</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="op">!</span><span class="op">!</span><span class="va">conceptList</span><span class="op">$</span><span class="va">acetaminophen</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">person_id</span> <span class="op">==</span> <span class="fl">56</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># Source:   SQL [2 x 7]</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># Database: DuckDB v0.9.2 [unknown@Linux 6.2.0-1018-azure:R 4.3.2/:memory:]</span></span></span>
<span><span class="co">#&gt;   drug_exposure_id person_id drug_concept_id drug_exposure_start_date</span></span>
<span><span class="co">#&gt;              <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>           <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>                  </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span>              166        56         1<span style="text-decoration: underline;">125</span>360 2022-01-27              </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span>              164        56        43<span style="text-decoration: underline;">135</span>274 2021-08-08              </span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 3 more variables: drug_exposure_end_date &lt;date&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   drug_type_concept_id &lt;dbl&gt;, quantity &lt;dbl&gt;</span></span></span></code></pre></div>
<p>This subject has two different drug exposure periods separated by
less than 6 months. Hence, it has two different cohort periods:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">cdm</span><span class="op">$</span><span class="va">acetaminophen_example1</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/addDrugUse.html">addDrugUse</a></span><span class="op">(</span></span>
<span>    ingredientConceptId <span class="op">=</span> <span class="fl">1125315</span>,</span>
<span>    gapEra <span class="op">=</span> <span class="fl">0</span></span>
<span>  <span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">subject_id</span> <span class="op">==</span> <span class="fl">56</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># Source:   SQL [2 x 13]</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># Database: DuckDB v0.9.2 [unknown@Linux 6.2.0-1018-azure:R 4.3.2/:memory:]</span></span></span>
<span><span class="co">#&gt;   cohort_definition_id subject_id cohort_start_date cohort_end_date duration</span></span>
<span><span class="co">#&gt;                  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>            <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>             <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span>                    1         56 2022-01-27        2022-03-04            37</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span>                    1         56 2021-08-08        2021-09-17            41</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 8 more variables: number_exposures &lt;dbl&gt;, cumulative_quantity &lt;dbl&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   initial_quantity &lt;dbl&gt;, impute_duration_percentage &lt;dbl&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   number_eras &lt;dbl&gt;, impute_daily_dose_percentage &lt;dbl&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   initial_daily_dose_milligram &lt;dbl&gt;, cumulative_dose_milligram &lt;dbl&gt;</span></span></span></code></pre></div>
<p>Let’s merge this two periods by modifying the <em>gapEra</em> input
when creating the cohort. For a better understanding of <em>gapEra</em>
arguments and functionalities, please see “Use DrugUtilisation to create
a cohort” vignette.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">cdm</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/generateDrugUtilisationCohortSet.html">generateDrugUtilisationCohortSet</a></span><span class="op">(</span></span>
<span>  cdm <span class="op">=</span> <span class="va">cdm</span>,</span>
<span>  name <span class="op">=</span> <span class="st">"acetaminophen_example2"</span>,</span>
<span>  conceptSet <span class="op">=</span> <span class="va">conceptList</span>,</span>
<span>  gapEra <span class="op">=</span> <span class="fl">180</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">cdm</span><span class="op">$</span><span class="va">acetaminophen_example2</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/addDrugUse.html">addDrugUse</a></span><span class="op">(</span></span>
<span>    ingredientConceptId <span class="op">=</span> <span class="fl">1125315</span>,</span>
<span>    gapEra <span class="op">=</span> <span class="fl">180</span>,</span>
<span>    duration <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>    quantity <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>    dose <span class="op">=</span> <span class="cn">FALSE</span></span>
<span>  <span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">subject_id</span> <span class="op">==</span> <span class="fl">56</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># Source:   SQL [1 x 8]</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># Database: DuckDB v0.9.2 [unknown@Linux 6.2.0-1018-azure:R 4.3.2/:memory:]</span></span></span>
<span><span class="co">#&gt;   cohort_definition_id subject_id cohort_start_date cohort_end_date duration</span></span>
<span><span class="co">#&gt;                  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>            <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>             <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span>                    1         56 2021-08-08        2022-03-04           209</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 3 more variables: number_exposures &lt;dbl&gt;, impute_duration_percentage &lt;dbl&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   number_eras &lt;dbl&gt;</span></span></span></code></pre></div>
<p>Mow we have only one record with two exposures for subject number 56.
Note that the number of eras is still 1, as we have defined the same
<em>gapEra</em> as when the cohort was created. However, it is possible
to specify a different <em>gapEra</em> than the one defined when the
cohort was created.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">cdm</span><span class="op">$</span><span class="va">acetaminophen_example2</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/addDrugUse.html">addDrugUse</a></span><span class="op">(</span></span>
<span>    ingredientConceptId <span class="op">=</span> <span class="fl">1125315</span>,</span>
<span>    gapEra <span class="op">=</span> <span class="fl">0</span></span>
<span>  <span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">subject_id</span> <span class="op">==</span> <span class="fl">56</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># Source:   SQL [1 x 13]</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># Database: DuckDB v0.9.2 [unknown@Linux 6.2.0-1018-azure:R 4.3.2/:memory:]</span></span></span>
<span><span class="co">#&gt;   cohort_definition_id subject_id cohort_start_date cohort_end_date duration</span></span>
<span><span class="co">#&gt;                  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>            <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>             <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span>                    1         56 2021-08-08        2022-03-04           209</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 8 more variables: number_exposures &lt;dbl&gt;, cumulative_quantity &lt;dbl&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   initial_quantity &lt;dbl&gt;, impute_duration_percentage &lt;dbl&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   number_eras &lt;dbl&gt;, impute_daily_dose_percentage &lt;dbl&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   initial_daily_dose_milligram &lt;dbl&gt;, cumulative_dose_milligram &lt;dbl&gt;</span></span></span></code></pre></div>
<p>Note that <em>number_eras</em> now indicates that we have two eras
within the same record.</p>
</div>
<div class="section level3">
<h3 id="erajoinmode">eraJoinMode<a class="anchor" aria-label="anchor" href="#erajoinmode"></a>
</h3>
<p><em>subject_id</em> number 56 has two separate exposure periods. As
observed, by defining the <em>gapEra</em>, we can merge these two
periods into a single era. However, there are different ways to join
these two continuous exposures, and this can be specified with
<em>eraJoinMode</em>.</p>
<p>The are three different ways to join different continuous
exposures:</p>
<ol style="list-style-type: decimal">
<li>
<em>eraJoinMode</em> = “zero” (default option): Subject’s daily dose
during the period between both continuous exposures is zero. However,
the time elapsed between these exposures contributes to the total
exposed time.</li>
</ol>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">cdm</span><span class="op">$</span><span class="va">acetaminophen_example2</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/addDrugUse.html">addDrugUse</a></span><span class="op">(</span></span>
<span>    ingredientConceptId <span class="op">=</span> <span class="fl">1125315</span>,</span>
<span>    gapEra <span class="op">=</span> <span class="fl">180</span>,</span>
<span>    duration <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>    quantity <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>    dose <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>    eraJoinMode <span class="op">=</span> <span class="st">"zero"</span></span>
<span>  <span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">subject_id</span> <span class="op">==</span> <span class="fl">56</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># Source:   SQL [1 x 13]</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># Database: DuckDB v0.9.2 [unknown@Linux 6.2.0-1018-azure:R 4.3.2/:memory:]</span></span></span>
<span><span class="co">#&gt;   cohort_definition_id subject_id cohort_start_date cohort_end_date duration</span></span>
<span><span class="co">#&gt;                  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>            <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>             <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span>                    1         56 2021-08-08        2022-03-04           209</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 8 more variables: number_exposures &lt;dbl&gt;, cumulative_quantity &lt;dbl&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   initial_quantity &lt;dbl&gt;, impute_duration_percentage &lt;dbl&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   number_eras &lt;dbl&gt;, impute_daily_dose_percentage &lt;dbl&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   initial_daily_dose_milligram &lt;dbl&gt;, cumulative_dose_milligram &lt;dbl&gt;</span></span></span></code></pre></div>
<ol start="2" style="list-style-type: decimal">
<li>
<em>eraJoinMode</em> = “previous”: The subject’s daily dose during
the period between both continuous exposures is equal to the daily dose
of the earliest subexposure. The time between both exposures contributes
to the total exposed time.</li>
</ol>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">cdm</span><span class="op">$</span><span class="va">acetaminophen_example2</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/addDrugUse.html">addDrugUse</a></span><span class="op">(</span></span>
<span>    ingredientConceptId <span class="op">=</span> <span class="fl">1125315</span>,</span>
<span>    gapEra <span class="op">=</span> <span class="fl">180</span>,</span>
<span>    duration <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>    quantity <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>    dose <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>    eraJoinMode <span class="op">=</span> <span class="st">"previous"</span></span>
<span>  <span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">subject_id</span> <span class="op">==</span> <span class="fl">56</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># Source:   SQL [1 x 13]</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># Database: DuckDB v0.9.2 [unknown@Linux 6.2.0-1018-azure:R 4.3.2/:memory:]</span></span></span>
<span><span class="co">#&gt;   cohort_definition_id subject_id cohort_start_date cohort_end_date duration</span></span>
<span><span class="co">#&gt;                  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>            <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>             <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span>                    1         56 2021-08-08        2022-03-04           209</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 8 more variables: number_exposures &lt;dbl&gt;, cumulative_quantity &lt;dbl&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   initial_quantity &lt;dbl&gt;, impute_duration_percentage &lt;dbl&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   number_eras &lt;dbl&gt;, impute_daily_dose_percentage &lt;dbl&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   initial_daily_dose_milligram &lt;dbl&gt;, cumulative_dose_milligram &lt;dbl&gt;</span></span></span></code></pre></div>
<ol start="3" style="list-style-type: decimal">
<li>
<em>eraJoinMode</em> = “subsequent”: The subject’s daily dose during
the period between both continuous exposures is the daily dose of the
latest subexposure. The time between both exposures contributes to the
total exposed time.</li>
</ol>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">cdm</span><span class="op">$</span><span class="va">acetaminophen_example2</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/addDrugUse.html">addDrugUse</a></span><span class="op">(</span></span>
<span>    ingredientConceptId <span class="op">=</span> <span class="fl">1125315</span>,</span>
<span>    gapEra <span class="op">=</span> <span class="fl">180</span>,</span>
<span>    duration <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>    quantity <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>    dose <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>    eraJoinMode <span class="op">=</span> <span class="st">"subsequent"</span></span>
<span>  <span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">subject_id</span> <span class="op">==</span> <span class="fl">56</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># Source:   SQL [1 x 13]</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># Database: DuckDB v0.9.2 [unknown@Linux 6.2.0-1018-azure:R 4.3.2/:memory:]</span></span></span>
<span><span class="co">#&gt;   cohort_definition_id subject_id cohort_start_date cohort_end_date duration</span></span>
<span><span class="co">#&gt;                  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>            <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>             <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span>                    1         56 2021-08-08        2022-03-04           209</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 8 more variables: number_exposures &lt;dbl&gt;, cumulative_quantity &lt;dbl&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   initial_quantity &lt;dbl&gt;, impute_duration_percentage &lt;dbl&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   number_eras &lt;dbl&gt;, impute_daily_dose_percentage &lt;dbl&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   initial_daily_dose_milligram &lt;dbl&gt;, cumulative_dose_milligram &lt;dbl&gt;</span></span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="overlapmode">overlapMode<a class="anchor" aria-label="anchor" href="#overlapmode"></a>
</h3>
<p>In the previous example, we observed the merging of two separated
drug exposure periods into one era. Now, let’s explore how two
overlapping drug exposure periods can be merged. It’s important to note
that this input only impacts overlapping periods that do not share the
same start date. Refer to the input <em>sameIndexMode</em> for details
on managing overlapping periods with the same start date.</p>
<p>Let’s observe subject number 8.</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">cdm</span><span class="op">$</span><span class="va">drug_exposure</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">drug_concept_id</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="op">!</span><span class="op">!</span><span class="va">conceptList</span><span class="op">$</span><span class="va">acetaminophen</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">person_id</span> <span class="op">==</span> <span class="fl">8</span><span class="op">)</span> </span>
<span><span class="co">#&gt; <span style="color: #949494;"># Source:   SQL [2 x 7]</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># Database: DuckDB v0.9.2 [unknown@Linux 6.2.0-1018-azure:R 4.3.2/:memory:]</span></span></span>
<span><span class="co">#&gt;   drug_exposure_id person_id drug_concept_id drug_exposure_start_date</span></span>
<span><span class="co">#&gt;              <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>           <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>                  </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span>               27         8         1<span style="text-decoration: underline;">125</span>360 1984-12-28              </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span>               28         8         1<span style="text-decoration: underline;">125</span>360 1982-11-07              </span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 3 more variables: drug_exposure_end_date &lt;date&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   drug_type_concept_id &lt;dbl&gt;, quantity &lt;dbl&gt;</span></span></span></code></pre></div>
<p>We can customize how the overlapping is handled using the
<em>overlapMode</em> input. In this case, there are five options:</p>
<ol style="list-style-type: decimal">
<li>
<em>overlapMode</em> = “sum” (default): The daily dose considered is
the sum of all exposures.</li>
</ol>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">cdm</span><span class="op">$</span><span class="va">acetaminophen_example2</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/addDrugUse.html">addDrugUse</a></span><span class="op">(</span></span>
<span>    ingredientConceptId <span class="op">=</span> <span class="fl">1125315</span>,</span>
<span>    duration <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>    quantity <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>    dose     <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>    overlapMode <span class="op">=</span> <span class="st">"sum"</span></span>
<span>  <span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">subject_id</span> <span class="op">==</span> <span class="fl">8</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># Source:   SQL [1 x 9]</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># Database: DuckDB v0.9.2 [unknown@Linux 6.2.0-1018-azure:R 4.3.2/:memory:]</span></span></span>
<span><span class="co">#&gt;   cohort_definition_id subject_id cohort_start_date cohort_end_date</span></span>
<span><span class="co">#&gt;                  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>            <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>         </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span>                    1          8 1982-11-07        1986-11-11     </span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 5 more variables: number_exposures &lt;dbl&gt;, number_eras &lt;dbl&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   impute_daily_dose_percentage &lt;dbl&gt;, initial_daily_dose_milligram &lt;dbl&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   cumulative_dose_milligram &lt;dbl&gt;</span></span></span></code></pre></div>
<ol start="2" style="list-style-type: decimal">
<li>
<em>overlapMode</em> = “previous”: The daily dose considered is that
of the earliest exposure.</li>
</ol>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">cdm</span><span class="op">$</span><span class="va">acetaminophen_example2</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/addDrugUse.html">addDrugUse</a></span><span class="op">(</span></span>
<span>    ingredientConceptId <span class="op">=</span> <span class="fl">1125315</span>,</span>
<span>    duration <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>    quantity <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>    dose     <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>    overlapMode <span class="op">=</span> <span class="st">"previous"</span></span>
<span>  <span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">subject_id</span> <span class="op">==</span> <span class="fl">8</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># Source:   SQL [1 x 9]</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># Database: DuckDB v0.9.2 [unknown@Linux 6.2.0-1018-azure:R 4.3.2/:memory:]</span></span></span>
<span><span class="co">#&gt;   cohort_definition_id subject_id cohort_start_date cohort_end_date</span></span>
<span><span class="co">#&gt;                  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>            <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>         </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span>                    1          8 1982-11-07        1986-11-11     </span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 5 more variables: number_exposures &lt;dbl&gt;, number_eras &lt;dbl&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   impute_daily_dose_percentage &lt;dbl&gt;, initial_daily_dose_milligram &lt;dbl&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   cumulative_dose_milligram &lt;dbl&gt;</span></span></span></code></pre></div>
<ol start="3" style="list-style-type: decimal">
<li>
<em>overlapMode</em> = “subsequent”: The daily dose considered is
that of the latest exposure.</li>
</ol>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">cdm</span><span class="op">$</span><span class="va">acetaminophen_example2</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/addDrugUse.html">addDrugUse</a></span><span class="op">(</span></span>
<span>    ingredientConceptId <span class="op">=</span> <span class="fl">1125315</span>,</span>
<span>    duration <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>    quantity <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>    dose     <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>    overlapMode <span class="op">=</span> <span class="st">"subsequent"</span></span>
<span>  <span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">subject_id</span> <span class="op">==</span> <span class="fl">8</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="fu"><a href="https://tidyselect.r-lib.org/reference/starts_with.html" class="external-link">contains</a></span><span class="op">(</span><span class="st">"dose"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># Source:   SQL [1 x 3]</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># Database: DuckDB v0.9.2 [unknown@Linux 6.2.0-1018-azure:R 4.3.2/:memory:]</span></span></span>
<span><span class="co">#&gt;   impute_daily_dose_percentage initial_daily_dose_milli…¹ cumulative_dose_mill…²</span></span>
<span><span class="co">#&gt;                          <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>                      <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>                  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span>                            0                      0.341                 <span style="text-decoration: underline;">17</span>896.</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ abbreviated names: ¹​initial_daily_dose_milligram,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   ²​cumulative_dose_milligram</span></span></span></code></pre></div>
<ol start="4" style="list-style-type: decimal">
<li>
<em>overlapMode</em> = “minimum”: The daily dose considered is the
minimum value among all exposures.</li>
</ol>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">cdm</span><span class="op">$</span><span class="va">acetaminophen_example2</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/addDrugUse.html">addDrugUse</a></span><span class="op">(</span></span>
<span>    ingredientConceptId <span class="op">=</span> <span class="fl">1125315</span>,</span>
<span>    duration <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>    quantity <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>    dose     <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>    overlapMode <span class="op">=</span> <span class="st">"minimum"</span></span>
<span>  <span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">subject_id</span> <span class="op">==</span> <span class="fl">8</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># Source:   SQL [1 x 9]</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># Database: DuckDB v0.9.2 [unknown@Linux 6.2.0-1018-azure:R 4.3.2/:memory:]</span></span></span>
<span><span class="co">#&gt;   cohort_definition_id subject_id cohort_start_date cohort_end_date</span></span>
<span><span class="co">#&gt;                  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>            <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>         </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span>                    1          8 1982-11-07        1986-11-11     </span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 5 more variables: number_exposures &lt;dbl&gt;, number_eras &lt;dbl&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   impute_daily_dose_percentage &lt;dbl&gt;, initial_daily_dose_milligram &lt;dbl&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   cumulative_dose_milligram &lt;dbl&gt;</span></span></span></code></pre></div>
<ol start="5" style="list-style-type: decimal">
<li>
<em>overlapMode</em> = “maximum”: The daily dose considered is the
maximum value among all exposures</li>
</ol>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">cdm</span><span class="op">$</span><span class="va">acetaminophen_example2</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/addDrugUse.html">addDrugUse</a></span><span class="op">(</span></span>
<span>    ingredientConceptId <span class="op">=</span> <span class="fl">1125315</span>,</span>
<span>    duration <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>    quantity <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>    dose     <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>    overlapMode <span class="op">=</span> <span class="st">"maximum"</span></span>
<span>  <span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">subject_id</span> <span class="op">==</span> <span class="fl">8</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># Source:   SQL [1 x 9]</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># Database: DuckDB v0.9.2 [unknown@Linux 6.2.0-1018-azure:R 4.3.2/:memory:]</span></span></span>
<span><span class="co">#&gt;   cohort_definition_id subject_id cohort_start_date cohort_end_date</span></span>
<span><span class="co">#&gt;                  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>            <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>         </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span>                    1          8 1982-11-07        1986-11-11     </span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 5 more variables: number_exposures &lt;dbl&gt;, number_eras &lt;dbl&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   impute_daily_dose_percentage &lt;dbl&gt;, initial_daily_dose_milligram &lt;dbl&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   cumulative_dose_milligram &lt;dbl&gt;</span></span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="sameindexmode">sameIndexMode<a class="anchor" aria-label="anchor" href="#sameindexmode"></a>
</h3>
<p>This input works similarly to <em>overlapMode</em>, but specifically
impacts overlapping drug exposure periods with the same start date. It
has the options “minimum”, “maximum”, and “sum” (default one), described
in <em>overlapMode</em>.</p>
</div>
<div class="section level3">
<h3 id="imputeduration-and-imputedailydose">imputeDuration and imputeDailyDose<a class="anchor" aria-label="anchor" href="#imputeduration-and-imputedailydose"></a>
</h3>
<p>These inputs determine the way the duration or the daily dose will be
imputed if their value is NA or fall outside the specified range
(defined in the <em>durationRange</em> and <em>dailyDoseRange</em>
inputs). There are five possible values for these two inputs:</p>
<ol style="list-style-type: decimal">
<li>
<em>imputeDuration</em>/<em>imputeDailyDose</em> = “none” (default):
imputation is not applied.</li>
<li>
<em>imputeDuration</em>/<em>imputeDailyDose</em> = “median”, “mean”,
“mode”: imputation method that will be used.</li>
<li>
<em>imputeDuration</em>/<em>imputeDailyDose</em> can also be a
numerical value that will replace the previous one.</li>
</ol>
</div>
<div class="section level3">
<h3 id="durationrange-and-dailydoserange">durationRange and dailyDoseRange<a class="anchor" aria-label="anchor" href="#durationrange-and-dailydoserange"></a>
</h3>
<p>These inputs are used to define the range within which the
duration/daily dose must be comprised. It should be a numeric vector of
length two, and the second value must be greater than or equal to the
first one. If set to NULL, no restrictions are applied.</p>
<p>If <em>durationRange</em> and <em>dailyDoseRange</em> are not set to
“none”, <em>imputeDuration</em> and <em>imputeDailyDose</em> must be
specified, respectively.</p>
</div>
</div>
<div class="section level2">
<h2 id="summarisedruguse">summariseDrugUse<a class="anchor" aria-label="anchor" href="#summarisedruguse"></a>
</h2>
<p>This function is employed to sum up the dose table across multiple
cohorts. Let’s see how it operates.</p>
<p>First, let’s use <em>addDrugUse</em> to add drug details to our
“acetaminophen_users” cohort. Then, we can apply
<em>summariseDrugUse</em> to explore the characteristics of the
cohort.</p>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">cdm</span><span class="op">[[</span><span class="st">"acetaminophen_users"</span><span class="op">]</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="va">cdm</span><span class="op">[[</span><span class="st">"acetaminophen_users"</span><span class="op">]</span><span class="op">]</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="../reference/addDrugUse.html">addDrugUse</a></span><span class="op">(</span></span>
<span>    cdm    <span class="op">=</span> <span class="va">cdm</span>,</span>
<span>    ingredientConceptId <span class="op">=</span> <span class="fl">1125315</span></span>
<span>  <span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="../reference/summariseDrugUse.html">summariseDrugUse</a></span><span class="op">(</span><span class="va">cdm</span><span class="op">[[</span><span class="st">"acetaminophen_users"</span><span class="op">]</span><span class="op">]</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 101 × 11</span></span></span>
<span><span class="co">#&gt;    group_name  group_level   strata_name strata_level variable    variable_level</span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>         <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>         </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> cohort_name acetaminophen Overall     Overall      number sub… <span style="color: #BB0000;">NA</span>            </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> cohort_name acetaminophen Overall     Overall      number rec… <span style="color: #BB0000;">NA</span>            </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> cohort_name acetaminophen Overall     Overall      duration    <span style="color: #BB0000;">NA</span>            </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> cohort_name acetaminophen Overall     Overall      duration    <span style="color: #BB0000;">NA</span>            </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> cohort_name acetaminophen Overall     Overall      duration    <span style="color: #BB0000;">NA</span>            </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> cohort_name acetaminophen Overall     Overall      duration    <span style="color: #BB0000;">NA</span>            </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> cohort_name acetaminophen Overall     Overall      duration    <span style="color: #BB0000;">NA</span>            </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> cohort_name acetaminophen Overall     Overall      duration    <span style="color: #BB0000;">NA</span>            </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> cohort_name acetaminophen Overall     Overall      duration    <span style="color: #BB0000;">NA</span>            </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> cohort_name acetaminophen Overall     Overall      duration    <span style="color: #BB0000;">NA</span>            </span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 91 more rows</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 5 more variables: variable_type &lt;chr&gt;, estimate_type &lt;chr&gt;, estimate &lt;chr&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   cdm_name &lt;chr&gt;, result_type &lt;chr&gt;</span></span></span></code></pre></div>
<div class="section level3">
<h3 id="strata">strata<a class="anchor" aria-label="anchor" href="#strata"></a>
</h3>
<p>We can employ this parameter to stratify our cohort and calculate the
estimates within every strata group.</p>
<p>Let’s use <em>addSex</em> function from “PatientProfiles” to include
a sex column in our cohort. Subsequently, we can use it as a strata
parameter.</p>
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">cdm</span><span class="op">[[</span><span class="st">"acetaminophen_users"</span><span class="op">]</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="va">cdm</span><span class="op">[[</span><span class="st">"acetaminophen_users"</span><span class="op">]</span><span class="op">]</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://darwin-eu-dev.github.io/PatientProfiles/reference/addSex.html" class="external-link">addSex</a></span><span class="op">(</span><span class="va">cdm</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="../reference/summariseDrugUse.html">summariseDrugUse</a></span><span class="op">(</span><span class="va">cdm</span><span class="op">[[</span><span class="st">"acetaminophen_users"</span><span class="op">]</span><span class="op">]</span>,</span>
<span>                 strata <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="st">"sex"</span> <span class="op">=</span> <span class="st">"sex"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 303 × 11</span></span></span>
<span><span class="co">#&gt;    group_name  group_level   strata_name strata_level variable    variable_level</span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>         <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>         </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> cohort_name acetaminophen Overall     Overall      number sub… <span style="color: #BB0000;">NA</span>            </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> cohort_name acetaminophen Overall     Overall      number rec… <span style="color: #BB0000;">NA</span>            </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> cohort_name acetaminophen Overall     Overall      duration    <span style="color: #BB0000;">NA</span>            </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> cohort_name acetaminophen Overall     Overall      duration    <span style="color: #BB0000;">NA</span>            </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> cohort_name acetaminophen Overall     Overall      duration    <span style="color: #BB0000;">NA</span>            </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> cohort_name acetaminophen Overall     Overall      duration    <span style="color: #BB0000;">NA</span>            </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> cohort_name acetaminophen Overall     Overall      duration    <span style="color: #BB0000;">NA</span>            </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> cohort_name acetaminophen Overall     Overall      duration    <span style="color: #BB0000;">NA</span>            </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> cohort_name acetaminophen Overall     Overall      duration    <span style="color: #BB0000;">NA</span>            </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> cohort_name acetaminophen Overall     Overall      duration    <span style="color: #BB0000;">NA</span>            </span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 293 more rows</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 5 more variables: variable_type &lt;chr&gt;, estimate_type &lt;chr&gt;, estimate &lt;chr&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   cdm_name &lt;chr&gt;, result_type &lt;chr&gt;</span></span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="druguseestimates">drugUseEstimates<a class="anchor" aria-label="anchor" href="#druguseestimates"></a>
</h3>
<p>Use this input to specify the estimates to be calculated. By default,
it will compute the minimum value, quartiles (5%, 25%, 50% - median, 75%
and 95%), the maximum value, the mean, the standard deviation, and the
number of missings values for each column added with
<em>addDrugUse</em>.</p>
</div>
<div class="section level3">
<h3 id="mincellcount">minCellCount<a class="anchor" aria-label="anchor" href="#mincellcount"></a>
</h3>
<p>Specify the minimum number of individuals that a strata group
musthave to appear in the table.</p>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Marti Catala, Mike Du, Yuchen Guo, Kim Lopez-Guell.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
